[[!meta author="""joey"""]]

[[!meta authorurl="""http://ikiwiki.info/ikiwiki.cgi?page=users%2Fjoey&amp;do=goto"""]]

[[!meta title="""change to todo/want_to_avoid_ikiwiki_using_http_or_https_in_urls_to_allow_serving_both on ikiwiki"""]]

[[!meta permalink="http://ikiwiki.info/recentchanges/#change-5954915a4fe8a889b8217cac99fae53cbe7f1e97"]]

<div id="change-5954915a4fe8a889b8217cac99fae53cbe7f1e97" class="metadata">
<span class="desc"><br />Changed pages:</span>
<span class="pagelinks">

<a href="http://git.ikiwiki.info/?p=ikiwiki;a=blobdiff;f=doc/todo/want_to_avoid_ikiwiki_using_http_or_https_in_urls_to_allow_serving_both.mdwn;h=f8ec4c420469f47168ced54b93dbe75fa39dfdab;hp=80925b458287767620d8862f782e77b1bd7dda63;hb=5954915a4fe8a889b8217cac99fae53cbe7f1e97;hpb=d916cd2f71f1c22dad947d7b2134edbbb15e7b8e" title="diff" rel="nofollow">[[diff|wikiicons/diff.png]]</a><a href="http://ikiwiki.info/ikiwiki.cgi?page=todo%2Fwant_to_avoid_ikiwiki_using_http_or_https_in_urls_to_allow_serving_both&amp;do=goto" rel="nofollow">todo/want to avoid ikiwiki using http or https in urls to allow serving both</a>


</span>
<span class="desc"><br />Changed by:</span>
<span class="committer">

<a href="http://ikiwiki.info/ikiwiki.cgi?page=users%2Fjoey&amp;do=goto" rel="nofollow">joey</a>

</span>
<span class="desc"><br />Commit type:</span>
<span class="committype">git</span>
<span class="desc"><br />Date:</span>
<span class="changedate"><span class="relativedate" title="Mon, 22 Nov 2010 20:04:11 +0000">20:04:11 11/22/10</span></span>
<span class="desc"><br /></span>
</div>

<span class="revert">
<a href="http://ikiwiki.info/ikiwiki.cgi?rev=5954915a4fe8a889b8217cac99fae53cbe7f1e97&amp;do=revert" title="revert" rel="nofollow">[[revert|wikiicons/revert.png]]</a>
</span>

<div class="changelog">


response<br />


</div>

<div class="diff">
<pre>
diff --git a/doc/todo/want_to_avoid_ikiwiki_using_http_or_https_in_urls_to_allow_serving_both.mdwn b/doc/todo/want_to_avoid_ikiwiki_using_http_or_https_in_urls_to_allow_serving_both.mdwn
index 80925b4..f8ec4c4 100644
--- a/doc/todo/want_to_avoid_ikiwiki_using_http_or_https_in_urls_to_allow_serving_both.mdwn
+++ b/doc/todo/want_to_avoid_ikiwiki_using_http_or_https_in_urls_to_allow_serving_both.mdwn
@@ -201,6 +201,10 @@ New API added by this branch:
   &gt;&gt;
   &gt;&gt; I personally think breaking the docwiki is enough to block that.
   &gt;&gt;
+  &gt;&gt;&gt; Well, the docwiki doesn&#39;t have an url configured at all, so I assumed
+  &gt;&gt;&gt; it would need to fall back to current behavior in that case. I had
+  &gt;&gt;&gt; not thought about browsing wiki&#39;s html files though, good point.
+  &gt;&gt;
   &gt;&gt; How about this?
   &gt;&gt;
   &gt;&gt; * `urlto($link, $page)` with `$page` defined: relative
@@ -210,12 +214,24 @@ New API added by this branch:
   &gt;&gt;   normally undef): absolute, starts with `http&#91;s&#93;://`
   &gt;&gt;
   &gt;&gt; --&#91;&#91;smcv&#93;&#93;
+  &gt;&gt; 
+  &gt;&gt;&gt; That makes a great deal of sense, bravo for actually removing
+  &gt;&gt;&gt; parameters in the common case while maintaining backwards
+  &gt;&gt;&gt; compatability!
+  &gt;&gt;&gt; 
+  &gt;&gt;&gt; It does highlight that it would be better to have a
+  &gt;&gt;&gt; `absolute_urlto($link)` (or maybe `absolute(urlto($link))` )
+  &gt;&gt;&gt; rather than the 3 parameter form. --&#91;&#91;Joey&#93;&#93;
 
 * `IkiWiki::baseurl` has a new second argument which works like the
   third argument of `urlto`
 
   &gt; I assume you have no objection to this --&#91;&#91;smcv&#93;&#93;
 
+  &gt;&gt; It&#39;s so little used that I don&#39;t really care if it&#39;s a bit ugly.
+  &gt;&gt; (But I assume changes to `urlto` will follow through here anyway.)
+  &gt;&gt; --&#91;&#91;Joey&#93;&#93; 
+
 * `IkiWiki::cgiurl` uses `$local_cgiurl` if passed `local_cgiurl =&gt; 1`
 
   &gt; Possibly changed to making this always be local unless `cgiurl =&gt; $x`
@@ -225,6 +241,8 @@ New API added by this branch:
   except `cgiurl` and/or `local_cgiurl`
 
   &gt; I assume you have no objection to this --&#91;&#91;smcv&#93;&#93;
+  &gt; 
+  &gt;&gt; Nod, although I don&#39;t know of a use case. --&#91;&#91;Joey&#93;&#93; 
 
 Bugs:
 
@@ -243,6 +261,10 @@ Bugs:
   &gt;&gt; would you accept a patch that makes `cgiurl` default to a local
   &gt;&gt; (starts-with-`/`) result? If you would, that&#39;d reduce the diff. --&#91;&#91;smcv&#93;&#93;
 
+  &gt;&gt;&gt; Yes, I absolutely think it should default to local. (Note that
+  &gt;&gt;&gt; if `absolute()` were implemented as suggested above, it could also
+  &gt;&gt;&gt; be used with cgiurl if necessary.) --&#91;&#91;Joey&#93;&#93;
+
 * It occurs to me that `IkiWiki::cgiurl` could probably benefit from being
   exported? Perhaps also `IkiWiki::baseurl`?
 

</pre>
</div>

<!-- 5954915a4fe8a889b8217cac99fae53cbe7f1e97 -->

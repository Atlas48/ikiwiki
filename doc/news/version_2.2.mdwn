ikiwiki 2.2 released with [[toggle text="these changes"]]
[[toggleable text="""
   * Change the aggregate plugin's locking strategy. Now it defers loading state
     until the wiki is building and already locked, unless it's aggregating.
     When aggregating, it does not wait for the lock if it cannot get it, and
     instead exits, to prevent aggregating processes from piling up.
   * Updated Spanish translation from Victor Moral.
   * Correct bug in the img plugin that caused dependencies on images to not
     always be tracked correctly.
   * Deal better with rebuilds that involve moving files; track and clean up the
     old files.
   * Change where the img plugin puts scaled images. It's better to make the
     scaled images subpages of the page that embeds them, rather than putting
     them alongside the original image, since if two pages scale the same image
     the same way, this prevents complications in dealing with two pages
     creating the same file. The move will be handled transparently, though you
     might want to rebuild your wiki to make it occur in one step.
   * Fix FTBFS in test suite introduced in last version. Closes: #[425891](http://bugs.debian.org/425891)
   * Apply a patch from Carl Worth allowing a class attribute to be passed
     through the img plugin. Also allow the id attribute to be passed through.
   * More consistent encoding of titles in rss and atom feeds. Don't use
     ESCAPE=HTML for titles in the templates for these feeds, and instead
     escape the title going in to the template. Previously, the title was
     sometimes double-escaped in a feed (if set via meta title), and sometimes
     not (if set from the page filename).
   * In the meta plugin, when a title is set, encode the html entities in it
     numerically. This works better in the current landscape of a rss spec that
     doesn't specify encoding, and variously broken feed consumers, according
     to &lt;http://www.rssboard.org/rss-profile#data-types-characterdata&gt;.
   * Correct some issues with display of unhandled preprocessor directives.
   * Apply a patch from Carl Worth adding support for using globs in link()
     in a PageSpec.
   * Explode some of the more insane regexps.
   * Add test suite for preprocessor directive parsing.
   * Fix wrapper generator and untaint code's handling of strings contining
     newlines.
   * Make the url absolution code for feeds significantly more robust.
   * Add typographyattributes configuration setting to typography plugin."""]]
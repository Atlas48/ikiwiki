News for ikiwiki 3.20100515:

   There are two significant changes to the page.tmpl template in this version.
   If you have a locally modified version of that template, you will need to
   update it at least to contain the following in the HTML `<head>`:

	<TMPL_IF DYNAMIC>
	<TMPL_IF FORCEBASEURL><base href="<TMPL_VAR FORCEBASEURL>" /><TMPL_ELSE>
	<TMPL_IF BASEURL><base href="<TMPL_VAR BASEURL>" /></TMPL_IF>
	</TMPL_IF>
	</TMPL_IF>

   Also, the footer should be wrapped in `<TMPL_UNLESS DYNAMIC> ... </TMPL_UNLESS>`

   There is a new "comment()" pagespec, that can be used to match a
   comment on a page. It is recommended to use it instead of the old
   method of using a pagespec such as "internal(comment\_*)" to match
   things that looked like comments. The old pagespec will now also match
   comments that are held for moderation; likely not what you want.

   There have also been some changes to the style.css in this version,
   particularly to support the new openid selector. If you have a modified
   version, of style.css, updating it (or moving it to local.css) is
   recommended.

ikiwiki 3.20100515 released with [[!toggle text="these changes"]]
[[!toggleable text="""
   * Removed misc.tmpl. Now to theme ikiwiki, you only need to customise
     a single template, page.tmpl.
   * If you have a locally customised page.tmpl, it needs to be updated
     to set &lt;base&gt; when BASEURL or FORCEBAREURL is set.
   * comments: Comments pending moderation are now stored in the srcdir
     alongside accepted comments, but with a `._comment_pending` extension.
     This allows easier byhand moderation, as the "\_pending" need
     only be stripped off and the comment be committed to version control.
   * The `comment_pending()` pagespec can be used to match such unmoderated
     comments, which makes it easy to add a feed of them, or a counter
     indicating how many there are.
   * Belatedly added a `comment()` pagespec.
   * Gave comment and page editing forms some CSS and accessability love.
   * Renamed postscan hook to indexhtml, to reflect its changed position,
     and typical use.
   * inline: Call indexhtml when inlining internal pages, so their
     text can be indexed for searching.
   * Delete hooks are passed deleted internal pages.
   * openid: Incorporated a fancy openid-selector signin form.
     (Based on <http://code.google.com/p/openid-selector/>)
   * openid: Use "openid\_identifier" as the form field, as required
     by OpenID Authentication v2.0 spec.
   * Removed the openidsignup option. Instead, my recommendation is to
     leave passwordauth enabled and let people who don't have an openid use it.
     The openid selector form avoids the UI annoyance of having both openid
     and passwordauth on one form.
   * calendar: Allow negative month to be specified. -1 is last month, etc.
     (And also negative years.)
   * calendar: Display year in title of month calendar.
   * Use xhtml friendly pubdate setting.
   * remove, rename: Add guards against XSRF attacks."""]]

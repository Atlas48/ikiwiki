[[!tag wishlist]]

It would be nice if ikiwiki, particularly [[plugins/comments]]
supported user avatar icons.

Idea is to add a directive that displays a small avatar image for a user.
Pass it the email address, openid, or wiki username of the user.

	\[[!avatar user@example.com]]
	\[[!avatar http://joey.kitenet.net/]]
	\[[!avatar user]]

These directives can then be hand-inserted onto pages, or more likely,
included in eg, a comment post via a template. Possibly included in a
recentchanges page item via that template too?

The avatars are provided by various sites. For email addresses, it uses a
[gravatar](http://gravatar.com/). For openid,
[openavatar](http://www.openvatar.com/) could used, but I am not very happy
with it; probably better to just get the email via SREG (as is done now for
openid), and use that. For a wiki username, the
user's email address is looked up and the gravatar for that user is
displayed. (Of course, the user has to have filled in their email address
on their Preferences page for that to work.)

An optional second parameter can be included, containing additional
options to pass in the 
[gravatar url](http://en.gravatar.com/site/implement/url).
For example, this asks for a smaller gravatar, and if a user does
not have a gravatar, uses a cute auto-generated "wavatar" avatar.

	\[[!gravatar user@example.com "size=40&default=wavatar"]]

The `gravitar_options` setting in the setup file can be used to
specify additional options to pass. So for example if you want
to use wavatars everywhere, set it to "default=wavatar".

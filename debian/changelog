ikiwiki (2.48) UNRELEASED; urgency=low

  * Add rel=nofollow to edit links. This may prevent some spiders from
    pounding on the cgi following edit links.
  * When calling decode_utf8 on known-problimatic content in aggregate,
    explicitly pass 0 (FB_DEFAULT) as the second parameter. Apparently perl
    5.8 needs this to avoid crashing on malformed utf-8, despite its docs
    saying it is the default.

 -- Joey Hess <joeyh@debian.org>  Wed, 28 May 2008 03:07:37 -0400

ikiwiki (2.47) unstable; urgency=low

  * mdwn: Add a multimarkdown setup file option.
  * If PERL5LIB is set to the libdir when building ikiwiki, calculate and 
    hardcode a proper 'use lib' statement anyway. This fixes a gotcha,
    since PERL5LIB won't work once ikiwiki is running via a wrapper or as
    a cgi.
  * orphans: As a special case, the toplevel index page is never considered
    an orphaned page.
  * inline: Display a message if the 'pages' parameter is missing, before
    it just expanded to nothing.
  * git: Skip over signed-off-by and similar lines in commit messages
    when generating recentchanges.
  * ENV can be used in the setup file to override environment variable
    settings, such as TZ or PATH.
  * Perls older than 5.10 need to use the old method of decoding utf-8 in CGI
    values. Neither method will work for all versions of perl, so check
    version number at runtime.
  * Avoid unsightly warning message when evaling broken pagespecs.
  * Improve error message when a pagespec fails to parse.

 -- Joey Hess <joeyh@debian.org>  Sun, 25 May 2008 14:25:42 -0400

ikiwiki (2.46) unstable; urgency=low

  * amazon_s3: New plugin, which injects wiki pages into Amazon S3, allowing
    ikiwiki to be used without a dedicated web server.
  * aggregate: Add support for web-based triggering of aggregation 
    for people stuck on shared hosting without cron. (Sheesh.) Enabled
    via the `aggregate_webtrigger` configuration optiom.
  * Add pinger and pingee plugins, which allow setting up mirrors and branched
    wikis that automatically ping one another to stay up to date.
  * Optimised file statting code when scanning for modified pages;
    cut the number of system calls in half. (Still room for improvement.)
  * Fixes for behavior changes in perl 5.10's CGI that broke utf-8 support
    in several interesting ways.

 -- Joey Hess <joeyh@debian.org>  Mon, 12 May 2008 20:51:50 -0400

ikiwiki (2.45) unstable; urgency=low

  * toc: Add the table of contents at sanitize time, rather than at format
    time. This allows the toc to be displayed when previewing an edit. It also
    avoids headers in the page template from showing up in the toc.
  * Add PREFIX/bin to the hardcoded PATH within ikiwiki.
  * Deal with different paths to perl when removing -T flag.
  * Add missing de.po. Closes: #471540
  * img: Support a title attribute, will be passed through to html.
    Closes: #478718
  * anonk: Add anonok_pagespec configuration setting that can be used to
    allow anonymous users to edit only matching pages. Closes: #478892
  * Fix ugly display when editing a page that has vanished.
  * srcfile now has an optional second parameter to avoid it throwing an error
    if the source file does not exist.
  * git: Put -- before the filename when calling git rev-list to avoid
    warning message when the file doesn't exist.
  * Add a Bundle::IkiWiki and Bundle::IkiWiki::Extras to the source for use
    with CPAN to install perl modules.
  * Add a cpan directory containing a CPAN::MyConfig that can ease use of
    CPAN to install in a home directory on shared hosting providers.
  * With these changes, it's pretty easy to install onto nearlyfreespeech.net
    and probably other shared hosting providers like dreamhost. Added
    a page documenting the process for nearlyfreespeech.

 -- Joey Hess <joeyh@debian.org>  Mon, 05 May 2008 15:06:05 -0400

ikiwiki (2.44) unstable; urgency=medium

  * Bring back the svnrepo setup file option. This is needed for
    recentchangediff to work with svn repos.
  * Allow libtext-markdown-perl to satisfy dependencies, as a
    an alternative to the markdown package.
  * Correct a bug in pagespec matching, where a empty pagespec matched all
    pages. This manifested as wikis with no locked pages treating them all as
    locked. The bug was introduced in version 2.41.
  * Medium urgency upload due to above fix.

 -- Joey Hess <joeyh@debian.org>  Thu, 17 Apr 2008 14:33:54 -0400

ikiwiki (2.43) unstable; urgency=low

  * Fix missing import of escapeHTML in userlink. (Scott Bronson)
  * Fix broken rcs_update for bzr. (Scott Bronson)
  * Use bzr --quiet to avoid it outputting stuff and messing up http headers.
    (Scott Bronson)
  * Give the full path to the hyperestraier helpfile in estseek.conf.
  * Recommend a recent git-core for git init. Closes: 475609

 -- Joey Hess <joeyh@debian.org>  Wed, 16 Apr 2008 18:35:13 -0400

ikiwiki (2.42) unstable; urgency=high

  * aggregate: Correct a mistake in the code that dummy up a guid for feeds
    lacking one.
  * inline: Correct handling of urls relative to baseurl in feeds.
  * Fix CSRF attacks against the preferences and edit forms. The fix involved
    embedding the session id in the forms, and not allowing the forms to be
    submitted if the embedded id does not match the session id. Closes: #475445
    (CVE-2008-0165)

 -- Joey Hess <joeyh@debian.org>  Thu, 03 Apr 2008 02:35:39 -0400

ikiwiki (2.41) unstable; urgency=low

  [ Adeodato Simó ]
  * Preprocessor directives generated by the shortcut plugin accept a `desc`
    parameter that overrides the anchor text provided at shortcut definition
    time. (Closes: #458126)

  [ martin f. krafft ]
  * The meta plugin now allows for the robots tag to be specified without the
    risk of it being scrubbed.
  * Let meta.openid set X-XRDS-Location header
  * Make makerepo set the Git merge remote.
    branch.master.remote previously used to default to origin, which has
    recently been changed; it now needs to be set explicitly, which this
    patch does. Closes: #470517
  * meta: Also generate openid2 headers.
  * Handle SimpleXMLRPCDispatcher arg count change in python 2.5
  * Provide XML-RPC proxy abstraction for Python plugins.

  [ Joey Hess ]
  * Add recentchangesdiff plugin that adds diffs to the recentchanges feeds.
  * rcs_diff is a new function that rcs modules should implement.
  * Implemented rcs_diff for git, svn, and tla (tla version untested).
    Mercurial and monotone still todo.
  * Support Text::Markdown::markdown, which is the spelling used by 
    version 1.0.16 of Text::Markdown.
  * Updated Spanish translation from Victor Moral.
  * Fix example exclude regexp. Closes: #469691
  * Remove locking code in git rcs_commit. I'm not sure if this was ever
    correct, and it's certianly not correct now, since the wiki is locked
    before rcs_commit is ever called, and should not be unlocked by
    rcs_commit either.
  * monotone: Require version 0.38 or greater, and stop using the mtnmergerc
    option. (Brian May)
  * Use forcebaseurl to make page previews be displayed with the html base
    set to the destination page. This avoids need for hacks to munge the urls
    in preview mode, which fixes several bugs.
  * Several destpage fixes in plugins.
  * Use absolute url for feedurl when filling out the feed templates.
    Closes: #470530
  * Fix expiry of old recentchanges changeset pages.
  * French translation update. Closes: #471010
  * external: Fix support of XML::RPC::fault.
  * htmltidy: Pass --markup yes, in case tidy's config file disabled it.
  * external: Add getargv and setargv methods to allow access to ikiwiki's
    @ARGV.
  * Correct bug in encoding of %pagestate keys, fixes edittemplate.
  * Detect invalid pagespecs and do not merge them in add_depends,
    as that can result in a broken merged pagespec that matches nothing.
  * Record new pages in %pagesources temporarily when previewing so that
    things that need to know the page source or type can query it from there.
    Fixes previewing of tables when creating a new page.
  * German translation update. Closes: #471540
  * Time::Duration is no longer used, remove from docs and recommends.
  * Store userinfo in network byte order for easy portability.
    (Old files will be automatically converted.)
  * Close meta tag for redir properly.
  * smiley: Detect smileys inside pre and code tags, and do not expand.
  * inline: Crazy optimisation to work around slow markdown.
  * Precompile pagespecs, about 10% overall speedup.
  * Changed to a binary index file, written using Storable, for speed.
  * external: Work around XML RPC's lack of support for null by passing
    a special sentinal value.
  * inline: Allow the "feedshow" parameter to take values greater than the
    value for "show".
  * Added a hardlink option in the setup file, useful if the source and
    dest are on the same filesystem and the wiki includes large media files,
    which would normally be copied, wasting time and space.

 -- Joey Hess <joeyh@debian.org>  Sat, 29 Mar 2008 21:07:22 -0400

ikiwiki (2.40) unstable; urgency=low

  [ Josh Triplett ]
  * Add new preprocessor directive syntax¸ using a '!' prefix.  Add a
    prefix_directives option to the setup file to turn this syntax on;
    currently defaults to false, for backward compatibility.  Support
    optional '!' prefix even with prefix_directives off, and use that in
    the underlay to support either setting of prefix_directives.  Add NEWS
    entry with migration information.

  [ Joey Hess ]
  * Danish translation update from Jonas Smedegaard. Closes: #465152
  * Generate XML RPC messages with the encoding set to utf-8 instead
    of XML::RPC's default of us-ascii. Allows interoperation with
    python's xmlrpc library, which threw invalid encoding exceptions and
    caused the rst plugin to hang.
  * Add the linkify and scan hooks. These hooks can be used to implement
    custom, first-class types of wikilinks.
  * Move standard wikilink implementation to a new link plugin, which
    will of course be enabled by default.
  * camelcase: Convert to use new linkify and scan hooks rather than the old
    hack.
  * Setting NOTAINT=1 had no effect when building ikiwiki itself, fix this.
  * Depend on HTML::Scrubber, since the scrubber is enabled by default and
    dies if its can't be loaded.
  * The search plugin needs to override <base> to point to the directory
    containing ikiwiki.cgi, but this should not change the urls to the style
    sheets etc. Add a new forcebareurl parameter to misctemplate to allow
    it to do that.
  * Preview limits the page dropdown to what's selected previously
    (as preserving the full list across preview would be tricky). Userdirs
    were still being offered as an option there, remove them.
  * Fix a bug where user A created a page concurrently with user B, and
    when B previewed it would redirect B to A's new page, losing B's work.
    Instead, don't redirect and let conflict handling resolve it.
  * monotone: Add code to default mergerc file to run
    _MTN/ikiwiki-netsync-hook when a commit is merged in from the net.
  * tla: Remove call to escapeHTML when constructing recentchanges message;
    the html is escaped at a different level. Closes: #466495
  * bzr, mercurial: Remove unused import of escapeHTML.
  * Fix another preview will_render bug. This one involved inline,
    which forced a scan of the page to make available metadata that
    appeared after the inline directive. Problem is that scan made it forget
    about any other files rendered due to the page. The scan also turns out
    to be unnecessary now, since meta persistently stores state and it's
    always available. So it was just removed.
  * Disable taint checking for all builds as people keep complaining about it,
    and since all versions of perl seem to be hopelessly broken.
  * Fix links generated by preprocessor directives when previewing.
  * inline: When forcing urls absolute for rss feeds, skip mailto and other
    such urls.
  * ikiwiki-makerepo: Don't fail if the third argument ends in a slash.
  * Allow colons in URLs after the first slash. (Adeodato Simó)

 -- Joey Hess <joeyh@debian.org>  Fri, 29 Feb 2008 23:05:39 -0500

ikiwiki (2.31.3) unstable; urgency=high

  [ Josh Triplett ]
  * Do not allow the about: URI scheme; some browsers interpret about:
    URIs like a limited version of data: URIs.  In particular, some
    versions of Internet Explorer interpret arbitrary HTML content in
    about: URIs.
  * Also filter the attributes cite, longdesc, and usemap, which can contain
    URIs.

  [ Joey Hess ]
  * meta: Check that the urls provided for authorurl, permalink, and openid
    are safe and can't contain javascript.

  [ Josh Triplett ]
  * Match literal '.' in URI schemas containing '.', rather than matching any
    character.
  * Do not allow the steam: URI scheme.
  * Allow the snews: URI scheme.
  * Allow the smb: URI scheme.

 -- Josh Triplett <josh@freedesktop.org>  Sun, 10 Feb 2008 14:48:48 -0800

ikiwiki (2.31.2) unstable; urgency=high

  * The security fix in the last release had buggy handling of data:image,
    now fixed. Closes: #465110 (CVE-2008-0808, CVE-2008-0809)

 -- Joey Hess <joeyh@debian.org>  Sun, 10 Feb 2008 15:31:17 -0500

ikiwiki (2.31.1) unstable; urgency=low

  * htmlscrubber security fix: Block javascript in uris.
  * Add htmlscrubber test suite.
  * Thanks to Josh Triplett for pointing out the holes and for his help
    in implementing and checking fixes.

 -- Joey Hess <joeyh@debian.org>  Sun, 10 Feb 2008 13:22:59 -0500

ikiwiki (2.31) unstable; urgency=low

  [ Joey Hess ]
  * Revert preservation of input file modification times in output files,
    since this leads to too many problems with web caching, especially with
    inlined pages. Properly solving this would involve tracking every page
    that contributes to a page's content and using the youngest of them all,
    as well as special cases for things like the version plugin, and it's just
    too complex to do.
  * aggregate: Forking a child broke the one state that mattered: Forcing
    the aggregating page to be rebuilt. Fix this.
  * cgi hooks are now run before ikiwiki state is loaded.
  * This allows locking the wiki before loading state, which avoids some
    tricky locking code when saving a web edit.
  * poll: This plugin turns out to have edited pages w/o doing any locking.
    Oops. Convert it from a cgi to a sessioncgi hook, which will work
    much better.
  * recentchanges: Improve handling of links on the very static changes pages
    by thunking to the CGI, which can redirect to the page, or allow it to be
    created if it doesn't exist.
  * recentchanges: Exipre all *._change pages, even if the directory
    they're in has changed.
  * aggregate: Lots of changes; aggregation can now run without locking the
    wiki, and there is a separate aggregatelock to prevent multiple concurrent
    aggregation runs.
  * monotone changes by Brian May:
    - On commits, replace "mtn sync" bidirectional with "mtn push" single
      direction. No need to pull changes when doing a commit. mtn sync
      is still called in rcs_update.
    - Support for viewing differences via patches using viewmtn.
  * inline: When previewing, still call will_render on rss/atom files,
    just avoid actually writing the files. This is necessary because ikiwiki
    saves state after a preview (in case it actually *did* write files),
    and if will_render isn't called its security checks will get upset
    when the page is saved. Thanks to Edward Betts for his help tracking this
    tricky bug down.
  * inline: Add new `allowrss` and `allowatom` config options. These can be
    used if you want a wiki that doesn't default to generating rss or atom
    feeds, but that does allow them to be turned on for specific blogs.
  * Don't die if running with --getctime and rcs_getctime throws an error.
    There are several cases (recentchanges files, aggregated files)
    where some source files are not in revision control.
  * Page templates can now use CTIME to show when the page was created.

  [ Josh Triplett ]
  * README.Debian: Mention user wikilists.

 -- Joey Hess <joeyh@debian.org>  Sat, 09 Feb 2008 23:09:45 -0500

ikiwiki (2.30) unstable; urgency=low

  [ Joey Hess ]
  * Old versions of git-init don't support --git-dir or GIT_DIR with
    --bare. Change ikiwiki-makerepo to use a method that should work with
    those older versions too.
  * aggregate: Don't let feeds set creation times for pages in the future.
  * Add full parser for git diff-tree output (Brian Downing)
  * aggregate: Fork a child process to handle the aggregation. This simplifies
    the code, since that process can change internal state as needed, and
    it will automatically be cleaned up for the parent process, which proceeds
    to render the changes.

  [ Josh Triplett ]
  * Add trailing comma to commented-out umask in sample ikiwiki.setup, so
    that uncommenting it does not break the setup file.

  [ Joey Hess ]
  * inline: The template can check for FIRST and LAST, which will be
    set for the first and last inlined page. Useful for templates that build
    tables and the like.
  * prettydate,ddate: Don't ignore time formats passed to displaytime
    function.
  * Pages with extensions starting with "_" are internal-use, and will
    not be rendered or web-edited, or matched by normal pagespecs.
  * Add "internal()" pagespec that matches internal-use pages.
  * RecentChanges is now a static html page, that's updated whenever a commit
    is made to the wiki. It's built as a blog using inline, so it can have
    an rss feed that users can subscribe to.
  * Removed support for sending commit notification mails. Along with it went
    the svnrepo and notify settings, though both will be ignored if left in
    setup files. Also gone with it is the "user()" pagespec.
  * Add refresh hook.
  * meta: Add pagespec functions to match against title, author, authorurl,
    license, and copyright. This can be used to create custom RecentChanges.
  * meta: To support the pagespec functions, metadata about pages has to be
    retained as pagestate.
  * Fix encoding bug when pagestate values contained spaces.
  * Add support for bzr, written by Jelmer Vernooij. Thanks also to bma for
    his independent work on bzr support.
  * Copyright file updates.

 -- Joey Hess <joeyh@debian.org>  Sat, 02 Feb 2008 17:41:57 -0500

ikiwiki (2.20) unstable; urgency=low

  * inline: Add copyright/license info on a per-post basis to atom
    feeds if available. (rss doesn't allow such info on a per-post basis)
  * Also include overall copyright/license and author info in atom feeds if
    available.
  * meta: Allow copyright/license metadata to contain arbitrary markup.
  * Call preprocessor hooks in void context during the scan pass. This allows
    the hook to determine if it's just scanning, and avoid expensive
    operations.
  * img: Detect scan mode and avoid generating and writing the image file
    during it, for a 2x speedup.
  * meta: Run in scan mode again (more intelligently) and re-add support for
    meta link.
  * Fix support for the case where metadata appears after an inline directive
    that needs to use it. This was broken in version 2.16.
  * template: Remove bogus htmlize pass added in 2.16.
  * template: Htmlize template variables, but also provide a raw version
    via `<TMPL_VAR raw_variable>`.
  * When htmlizing text, if the input is a single line with no newline,
    and the htmlizer (such as markdown and textile) generates a html
    paragraph, remove it. This allows removing several hacks from other
    plugins that htmlize fragements of pages.
  * In preferences, allow the subscriptions and email fields to be cleared.
  * teximg: Fix to support the same formula on multiple pages.

 -- Joey Hess <joeyh@debian.org>  Thu, 10 Jan 2008 14:52:57 -0500

ikiwiki (2.19) unstable; urgency=low

  * Only try postsignin if no other action matched. Fixes a bug where the
    user goes back from the signin screen and does something else.
  * Improve behavior when trying to sign in with no cookies.
  * Improved the canedit hook interface, allowing a callback function to be
    returned (and not run in some cases) rather than the plugins directly
    forcing a user to log in.
  * opendiscussion: allow editing of the toplevel discussion page,
    and, indirectly, allow creating new discussion pages.
  * Add a prereq on Data::Dumper 2.11 or better, needed to dump q// objects.
  * htmlscrubber: Further work around #365971 by adding tags for 'br/', 'hr/'
    and 'p/'.
  * aggregate: Include copyright statements from rss feed as meta copyright
    directives.
  * aggregate: Yet another state saving fix (sigh).
  * aggregate: Add hack to support feeds with invalidly escaped html entities.

 -- Joey Hess <joeyh@debian.org>  Tue, 08 Jan 2008 20:43:18 -0500

ikiwiki (2.18) unstable; urgency=low

  * Split error messages for failures to drop real uid and gid.
  * Retry dropping uid and gid, possibly this will help with the "Resource
    temporarily unavailable" failures I've experienced under xen.
  * Stop testing Encode::is_utf8 in decode_form_utf8: That doesn't work.
  * decode_form_utf8 only fixed the utf-8 encoding for fields that were
    registered at the time it was called, which was before the
    formbuilder_setup hook. Fields added by the hook didn't get decoded.
    But it can't be put after the hook either, since plugins using the hook
    need to be able to use form values. To fix this dilemma, it's been changed
    to a decode_cgi_utf8, which is called on the cgi query object, before the
    form is set up, and decodes *all* cgi parameters.
  * aggregate: Only save state if it was already loaded. This didn't used to
    matter, but after recent changes, state is not always loaded, and saving
    would kill it.
  * table: Fix dependency tracking for external data files. Closes: #458387

 -- Joey Hess <joeyh@debian.org>  Sat, 05 Jan 2008 02:15:18 -0500

ikiwiki (2.17) unstable; urgency=low

  * Improved parentlinks special case for index pages.
  * redir: Support for specifying anchors.
  * img: Avoid nesting images when linking to another image. Closes: #457780
  * img: Allow the link parameter to point to an exterior url.
  * conditional: Improve regexp testing for simple uses of pagespecs
    that match only the page using the directive, adding 'included()'
    and supporting negated pagespecs and added whitespace.
  * map: Fix handling of common prefix to handle the case where it's
    in a subdirectory. Patch by Larry Clapp.
  * aggregate: Fix stupid mistake introduced when converting it to use
    the needsbuild hook. This resulted in feeds not being removed when pages
    were updated, and feeds sometimes being forgotten about.
  * aggregate: Avoid uninitialised value warning when removing a feed that
    has an expired guid.

 -- Joey Hess <joeyh@debian.org>  Sun, 30 Dec 2007 14:57:44 -0500

ikiwiki (2.16) unstable; urgency=low

  * Major basewiki reorganisation. Most pages moved into ikiwiki/ subdirectory
    to avoid polluting the main namespace, and some were further renamed.
  * meta: Add redir support, based on a patch by Thomas Schwinge.
  * Redirs added for moved basewiki pages. These will be removed in a future
    release.
  * Remove .otl file from sandbox to avoid build ugliness. Closes: #454181
  * Finally implemented a simple per-page data storage mechanism for plugins,
    via the %pagestate hash.
  * Use pagestate in meta to detect potential redir loops.
  * Added a version plugin that saves state about what's using it, to force
    pages to rebuild when ikiwiki's version changes.
  * The calendar plugin stores state about when it needs to be updated,
    and forces rebuilds of the pages that contain calendars. So
    running ikiwiki --refresh at midnight is now enough, no need for a full
    wiki rebuild each midnight.
  * calendar: Work around block html parsing bug in markdown 1.0.1 by
    enclosing the calendar in an extra div.
  * Fix file pruning code to work if ikiwiki is run with "." as the srcdir.
  * Add an edittemplate plugin, allowing registering template pages, that
    provide default content for new pages created using the web frontend.
  * Change formbuilder hook to not be responsible for displaying a form,
    so that more than one plugin can use this hook.
    I believe this is a safe change, since only passwordauth uses this hook.
    (If some other plugin already used it, it would have broken passwordauth!)
  * Ensure that web edited pages always end in a newline.
  * Avoid unnecessary stat calls to get mtime when rendering pages, use
    cached value.
  * Preserve input file modification times in output files.
  * Allow dashes in preprocessor directive commands, and shortcuts.
  * Htmlize parameters passed to the template preprocessor directive before
    inserting them into the html template. This ensures that markdown
    acts on them, even if the value is expanded inside a block-level html
    element in the html template. Closes: #454058
  * Use a div in the note template rather than a span.
  * shortcut: Expand %S to the raw input text, not url-encoded.
  * Don't increment feed numbers when an inline has no feeds. (Nis Martensen)
  * Allow editing a page and deleting all content, while still disallowing
    creating a new page that's entirely empty.
  * meta: Drop support for "meta link", since supporting this for internal
    links required meta to be run during scan, which complicated its data
    storage, since it had to clear data stored during the scan pass to avoid
    duplicating it during the normal preprocessing pass.
  * If you used "meta link", you should switch to either "meta openid" (for
    openid delegations), or tags (for internal, invisible links). I assume
    that nobody really used "meta link" for external, non-openid links, since
    the htmlscrubber ate those. (Tell me differently and I'll consider bringing
    back that support.)
  * meta: Improved data storage.
  * meta: Drop the hackish filter hook that was used to clear
    stored data before preprocessing, this hack was ugly, and broken (cf:
    liw's disappearing openids).
  * aggregate: Convert filter hook to a needsbuild hook.
  * map: Don't inline images.
  * brokenlinks: Don't list the same link multiple times. (%links might
    contain multiple copies of the same link)
  * git: Correct display of multiline commit messages in recentchanges.
  * Re-organise dependencies and recommends now that recommends are installed
    by default.
  * Don't refuse to render files with ".." in their name. (Anchor the regexp.)
  * Work around perl taint checking bug #411786, where perl sometimes randomly
    sets the taint flag on untainted variables, by disabling taint checking
    in the deb. This sucks.

 -- Joey Hess <joeyh@debian.org>  Tue, 18 Dec 2007 16:37:22 -0500

ikiwiki (2.15) unstable; urgency=low

  * Add a new ikiwiki-makerepo program, that automates setting up a repo
    and importing existing content for svn, git, and mercurial. This makes
    the setup process much simpler.
  * Reorganised git documentation.
  * Actually install the ikiwiki-update-wikilist program.
  * Improve workaround for perl bug #376329. Rather than double-encoding,
    which has been reported to cause encoding problems (though I haven't
    reproduced them), just catch a failure of markdown, and retry.
    (The crazy perl bug magically disappears on the retry.)
    Closes: #449379
  * Add umask configuration option. Closes: #443329

 -- Joey Hess <joeyh@debian.org>  Sat, 01 Dec 2007 11:44:01 -0500

ikiwiki (2.14) unstable; urgency=high

  * Let CC be used to control what compiler is used to build wrappers.
  * Use 'cc' instead of gcc as the default compiler.
  * Security fix: Ensure that there are no symlinks anywhere in the path
    to the top of the srcdir. In certian unusual configurations, an attacker
    who could commit to one of the parent directories of the srcdir could
    use a symlink attack to cause ikiwiki to publish files elsewhere in the
    filesystem. More details at <http://ikiwiki.info/security/#index29h2>

 -- Joey Hess <joeyh@debian.org>  Mon, 26 Nov 2007 15:26:06 -0500

ikiwiki (2.13) unstable; urgency=low

  The ikiwiki zombie army release.

  * Add liblwpx-paranoidagent-perl to recommends of Debian package,
    this is needed to do OpenID really securely.
  * ikiwiki.setup is licensed same as the basewiki, not GPLed.
  * inline: Add timeformat parameter to control how the ctime of
    inlined pages is displayed. Closes: #451019
  * Add wrappergroup config option, which can be used to cause wrappers
    to be created owned by some group other than the default. Useful
    then there's a shared repository with access controlled by a group,
    to let ikiwiki run setgid to that group.
  * ikiwiki-mass-rebuild: Run build with the user in all their groups.
  * Correct markdown in example index page in setup. Closes: #451469
  * Better error message when a setup file has a syntax error.
    Closes: #451666
  * Fix mercurial historyurl in example setup file.
  * More compact output for the brokenlinks plugin.
  * Allow trailing slashes after page names in wikilinks.
  * Don't consider links to anchors on the same page to be self links.
    Patch by Daniel Burrows. Closes: #451729
  * When usedirs is disabled, link direct to index.html files, not to
    directories, to improve browsing of file:// urls.
    Patch by Daniel Burrows. Closes: #451728
  * Allow html5 video and audio tags and their attributes in the htmlscrubber.
  * toc: Handle html elements embedded inside a header, rather than
    stopping collecting the header text at the first element.

 -- Joey Hess <joeyh@debian.org>  Sat, 24 Nov 2007 16:06:22 -0500

ikiwiki (2.12) unstable; urgency=low

  [ Joey Hess ]
  * Fix some issues with toggles in preview mode.
  * Fix an aggregate plugin expiry bug. Over time, it's possible for the same
    page name to be expired and reused for several distinct guids. When this
    happened, the expiry code counted each past guid that had used that page
    name as a currently existing page, and thus expired too many pages.
  * Avoid a race in the git rcs_commit function, by not assuming HEAD will
    stay the same for the duration of the function.
  * Avoid using commands like git-diff and instead use "git diff".
    In some configurations, only the main git command is in the path.
  * Improve the RecentChanges display for git merges, by passing -c instead
    of -m to git-log, and by skipping display of commits that change no
    pages.
  * Don't truncate git commit messages to the first line in RecentChanges,
    show the full message.
  * map: Recent changes caused unnecessary ul's to be inserted for items
    that were all at the same level, fix. Closes: #449285

  [ Josh Triplett ]
  * Fix table plugin to not generate an unbalanced tbody tag with header=no
  * Add xmlns attribute on html element in templates; pages can now
    validate.

  [ Joey Hess ]
  * In the example setup file, use mode 6755 for the git post-update hook.
    It needs to be setgid if the master repo is a shared repository, so
    that pushes into the working copy repository happen as the same group,
    avoiding permissions problems.
  * The first git commit legitimately has no parents. Avoid recentchanges
    spewing uninitialised value warnings and debug messages about it.
    Dummying up a parent of 0000000 allows gitweb to work too.

 -- Joey Hess <joeyh@debian.org>  Mon, 12 Nov 2007 14:35:09 -0500

ikiwiki (2.11) unstable; urgency=low

  * Correct a pair of logic errors that triggered if svnpath was empty.
  * If gitorigin_branch is set to the empty string, don't push or pull.
    Useful for laptop clones of remote wikis.
  * Add a calendar plugin, contributed by Manoj Srivastava.
  * Reformat calendar plugin to ikiwiki conventions.
  * The calendar plugin made *every* page depend on every other page,
    which seemed a wee tiny little bit overkill. Fixed the dependency
    calculations (I hope.)
  * Removed manual ctime statting code, and just have the calendar plugin use
    %pagectime.
  * Ikiwiki has moved into a git repository.
  * postsparkline: Avoid a confusing error message if no pages match
    and instead show an empty graph.
  * Add handling of feeds for nested inlines, as well as support for a
    single page containing two different feeds.
  * Also fixed some places in inline that failed to use destpage correctly.
  * ikiwiki-mass-rebuild: Patch from HenrikBrixAndersen to fix order
    of permissions dropping code to work on FreeBSD.
  * ikiwiki-mass-rebuild: Don't clear PATH from the environment.
  * Run git-commit -q (though it doesn't do much good due to its stderr
    abuse).

 -- Joey Hess <joeyh@debian.org>  Fri, 26 Oct 2007 03:29:09 -0400

ikiwiki (2.10) unstable; urgency=low

  * Tidy ctime debug output for git.
  * French translation update. Closes: #445923
  * Fix --get-ctime with git, needed to remove srcdir from filename.
  * In the cgi edit path, reload the index file before rendering. A bug
    showed up where a web edit that added a page caused a near-concurrent
    web edit to fail in will_render. While it would be hard to reproduce this,
    my analysis is that the failing cgi started first, loaded the index file
    (prior to locking) then the other cgi created the new page and rendered
    it, and then the failing cgi choked on the new file when _it_ tried to
    render it. Ensuring that the index file is loaded after taking the lock
    will avoid this bug.
  * Fix strange stderr-hiding code in the git module, allow error messages
    to be passed on to stderr. Also fixes a potential bug, since git error
    meesages were treated as if they came from git stdout.
  * Add a "createlink" class attribute to the span for wikilinks pointing
    to not-yet-existing pages. I don't have a useful style defined for that
    though.
  * Rewritten rst plugin by madduck is a python program that communicates with
    ikiwiki via XML RPC. This should be much faster than the old plugin that
    had to fork python for every rst page render. Note that if you use
    the rst plugin, you now need to have the RPC::XML perl module installed.
  * Danish translation from Jonas Smedegaard. Closes: #446952
  * Support git authors of the form "joey <joey>", which is common when
    importing from a svn repo.

 -- Joey Hess <joeyh@debian.org>  Sat, 20 Oct 2007 19:42:46 -0400

ikiwiki (2.9) unstable; urgency=low

  * Fix copyright and licence styling.
  * tag: Add taglink preprocessor directive, supporting visible tag links.
    Closes: #443344
  * map: Fully specify paths to links to avoid issues when the bestlink
    didn't point to the correct page.
  * map: Render pages on the way to subpages whose parent pages
    are not included in the map. Include special styling for such pages.
  * map: Remove common prefixes and don't over-indent.
  * Add class option to htmllink().
  * img: Allow link=somepage to cause the image to link to a given page.
    Slight overriding of link, as link=no is still used to disable the linking
    entirely. Unless you have a page named "no"..
  * Save index after previewing page edit, since even previewing can create
    files in some situations, and this is appropriate in some cases, such as
    the teximg plugin's error log file.
    Such files will be automatically cleaned up at an appopriate later time.
  * Don't allow whitespace in link text in a wikilink. This was still
    allowed by the regexp in one case though not documented to work, and
    was ambiguous with preprocessor directives.
  * camelcase: Tighten regexp to avoid false positives. WikiWords are only
    linkified now if they are preceeded by whitespace.

 -- Joey Hess <joeyh@debian.org>  Sun, 30 Sep 2007 15:07:24 -0400

ikiwiki (2.8) unstable; urgency=low

  * Redid the debian/copyright file, using the proposed new copyright file
    format. Included many details not previously listed in the old file.
  * inline: add feedonly option, set feedonly=yes to get only the feed button
    but not inline the pages.
  * meta: Support license and copyright information. The information will
    be shown in the page footer. HTML will also be inserted that should
    support the rel=license microformat as well as the HTML spec's
    rel=copyright.
  * table plugin: Actually specify the delimiter when parsing CSV.
  * table plugin: The previous version broke WikiLinks inside quoted values.
    Fix this by linkifying CSV data after parsing it, while DSV data is still
    linkified before parsing.

 -- Joey Hess <joeyh@debian.org>  Sun, 16 Sep 2007 20:02:25 -0400

ikiwiki (2.7) unstable; urgency=low

  [ Joey Hess ]
  * Add an editcontent hook.
  * Support for looking in multiple directories for underlay files.
  * Plugins can add new directories to the search path with the add_underlay
    function.
  * Split out smiley underlay files into a separate underlay, so if the plugin
    isn't used, the wiki isn't bloated with all those files.
  * Allow -cgi -wrapper to be passed on the command line to generate a
    wrapper.
  * Fix some taint issues with generating wrappers using the command line.
  * Don't allow newlines in link text in a wikilink.
  * Tables containing links with a link text were misparsed, because the "|"
    in the wikilink looked like a table field separator. Avoid this ambiguity
    by linkifying the data before parsing it as a table.
  * Turn on allow_loose_quotes in the table plugin's Text::CSV object,
    so that links from wikilinks don't confuse the parser.
  * mercurial: Pass --style default to hg log to ensure right format is used.
  * mercurial: Fix rcs_getctime (thanks, bma)

  [ Josh Triplett ]
  * Use git-log rather than the shell, git-rev-list, and git-diff-tree.
    Patch by Jamey Sharp <jamey@minilop.net>.
  * Renames from git-diff-tree aren't handled, so don't ask for them.
    Patch by Jamey Sharp
  * Handle operating in sub-trees of a git repository.
    When looking for git commits that affect the wiki, only include changes
    that affect the ikiwiki source directory. If that is not the top-level
    directory in this git repository, strip off the prefix as given by
    `git-rev-parse --show-prefix` from all names reported by git-log.
    Patch by Jamey Sharp

  [ Joey Hess ]
  * Correct generation of RFC 3339 format times for atom/rss feeds. Always use
    gmtime for these since a time zone is not specified.
  * Updated Spanish translation from Victor Moral.
  * table: Text::CSV doesn't return decoded unicode (XS module); decode its
    return values.
  * Change git test suite to reflect change in log for initial repo creation
    commit.
  * Add the ikiwiki-update-wikilist command.
  * Exclude external plugin from syntax check since it uses a module that is
    not in the build depends. Closes: #441171

 -- Joey Hess <joeyh@debian.org>  Sat, 08 Sep 2007 21:54:11 -0400

ikiwiki (2.6.1) unstable; urgency=low

  * Ye olde brown paper bag.
  * Fix minor bug when blogging by cgi, introduced in last version.
  * Fix a bug in unlockwiki intorduced last version that made it crash ikiwiki
    if it wasn't locked when called. This is known to break post-commit
    emails.

 -- Joey Hess <joeyh@debian.org>  Sun, 26 Aug 2007 13:38:23 -0400

ikiwiki (2.6) unstable; urgency=low

  * Various minor bug fixes for silly mistakes in the code, thanks to the
    various reviewers.
  * Fix problems with previewing in the graphviz plugin. Thanks,
    HenrikBrixAndersen.
  * Allow raw html in the rst plugin.
  * Add --set-option command line switch.
  * pagetemplate: don't display template name
  * Add rel=tag attribute to tag links, supporting that microformat, as well
    as allowing them to be styled specially. Thanks, NicolasLimare.
  * Add sessioncgi hook.
  * Move blog form code out of CGI.pm and into the inline plugin.
  * Updated Spanish translation from Victor Moral.
  * Updated French translation from Cyril Brulebois. Closes: #437181
  * The toc directive doesn't work well or make sense inside an inlined page.
    Disable it when the page with the toc is nested inside another page.
  * Apply a patch from NicolasLimare adding modification date tags to rss and
    atom feeds, and also changing the publication time for a feed to the
    newest modiciation time (was newest creation time).
  * The patch also adds dcterms:creator to rss items that have a known author.
  * Support pagespec "functions" with no parameters, like included() in the
    conditional plugin.
  * Add time=mtime option to postsparkline.
  * Fix --libdir to work at the command line.
  * Plugins can now be written as standalone external programs, which can
    be written in any language that can do XML RPC.
  * Change yet again how unhandled and escaped preprocessor directives are
    re-output onto the page. Hopefully I finally got it right..
  * Fix bug in deletion/move during edit code introduced in 1.44. Need to take
    the underlaydir into account.
  * Fix bug when editing file from underlaydir, need to rcs_add it even though
    a page creation isn't occuring.
  * Various minor fixes and stylistic improvements suggested by Perl::Critic.
  * Applied Jeremie Koenig's pluggable editpage buttons patch:
    - add a title to the editpage form;
    - pass a reference to the list of buttons to the formbuilder_setup
      hooks, so we can add ours;
    - relax asumption about the possible submit values (use "Save Page"
      explicitly);
    - de-hardcode the submit buttons from the editpage template
      (This was needed for compatability with a bug in CGI::FormBuilder
      3.0401, but ikiwiki already needs a newer version.)
  * Pass buttons to all other formbuilder_setup hooks too.
  * Add color parameter to postsparkline. Closes: #438900
  * Add proper Homepage field to Debian package (needs uber-new dpkg).
  * Add monotone support, contributed by William Uther.
  * Avoid ugly gettext messages if LANG is empty. Closes: #439035
  * Added teximg plugin to generate images from latex code.
    Contributed by Patrick Winnertz as a GSoC project.
  * Call the formbuilder hook for the edit page.
  * Call decode_form_utf8 before running formbuilder_setup hooks.
  * Add editdiff plugin contributed by Jeremie Koenig.
  * Fix it to not leak path info.
  * Add embed plugin, which allows embedding content from google maps, video,
    calendar, and youtube. Normally, the htmlsanitiser eats these since they
    use unsafe tags, the embed plugin overrides it for trusted sites.
  * The googlecalendar plugin is now deprecated, and will be removed
    eventually. Please switch to using the embed plugin.

 -- Joey Hess <joeyh@debian.org>  Fri, 24 Aug 2007 17:09:44 -0400

ikiwiki (2.5) unstable; urgency=low

  * Wrap the editpage template in the standard misctemplate, this allows the
    pagetemplate hook to work for that page.
  * Above change fixes the favicon plugin to work on edit pages.
  * Correct some issues with escaped preprocessor directives.
  * Make the map plugin notice when pages in the map are deleted and update
    it.
  * Add a htmlext config option, this can be used to make ikiwiki generate
    html files with a different extension.
  * Fix graphviz plugin to not try to read images as utf-8; they might
    sometimes contain invalid utf-8 byte sequences. Thanks,
    HenrikBrixAndersen.
  * Fix re-rendering of pages when a linked to page goes away. This was broken
    in version 1.50 with the addition of %destsources. Thanks, Ethan
    Glasser-Camp.
  * Add templatefile hook.
  * Add pagetemplate plugin, which allows changing the template used for
    a page. (Not to be confused with the hook of the same name..)
  * Add a libdir config option to let ikiwiki load perl modules, including
    plugins, from a user-configurable directory.

 -- Joey Hess <joeyh@debian.org>  Thu, 26 Jul 2007 21:42:43 -0400

ikiwiki (2.4) unstable; urgency=low

  * Make the toc plugin use html-compatible anchors. This is necessary since
    most web sites serve ikiwiki xhtml files as text/html and mozilla browsers
    get confused. So it's best for ikiwiki to follow the compatability
    recommendations in appendix C of the XHTML spec. Closes: #432045
  * Support building on systems that lack asprintf.
  * mercurial getctime is currently broken, apparently by some change in
    mercurial version 0.9.4. Turn the failing test case into a TODO test case.
  * Fix links to alternate stylesheets when usedirs is enabled. Closes: #432556
  * Use type= not style= in html for alternate stylesheets, which is more
    correct (but in my testing both epiphany and iceweasel work ok with
    style=text/css).
  * In img tag, allow link=no to disable link to full size image. Thanks,
    Nis Martensen. Closes: #433188

 -- Joey Hess <joeyh@debian.org>  Sun, 15 Jul 2007 15:02:43 -0400

ikiwiki (2.3) unstable; urgency=low

  * Corrected a typo in an error handler in the image plugin.
  * Allow svnpath config option to contain additional extra slashes anywhere
    w/o confusing ikiwiki.
  * Rcs modules are now imported, so other modules that need similar
    normalisation of configs etc can do so.
  * Patch fixing various additional problems with test suite. Closes: #425891
    once more.
  * French update from Jean-Luc Coulon. Closes: #430771
  * Correct a longstanding bug that could cause the edit form to be empty.
    This turns out to have occured if the cgi wrapper was created by an
    ikiwiki invocation that included --rebuild. Thanks to Carl Worth for
    tracking that down.

 -- Joey Hess <joeyh@debian.org>  Fri, 29 Jun 2007 18:30:38 -0400

ikiwiki (2.2) unstable; urgency=low

  * Change the aggregate plugin's locking strategy. Now it defers loading state
    until the wiki is building and already locked, unless it's aggregating.
    When aggregating, it does not wait for the lock if it cannot get it, and
    instead exits, to prevent aggregating processes from piling up.
  * Updated Spanish translation from Victor Moral.
  * Correct bug in the img plugin that caused dependencies on images to not
    always be tracked correctly.
  * Deal better with rebuilds that involve moving files; track and clean up the
    old files.
  * Change where the img plugin puts scaled images. It's better to make the
    scaled images subpages of the page that embeds them, rather than putting
    them alongside the original image, since if two pages scale the same image
    the same way, this prevents complications in dealing with two pages
    creating the same file. The move will be handled transparently, though you
    might want to rebuild your wiki to make it occur in one step.
  * Fix FTBFS in test suite introduced in last version. Closes: #425891
  * Apply a patch from Carl Worth allowing a class attribute to be passed
    through the img plugin. Also allow the id attribute to be passed through.
  * More consistent encoding of titles in rss and atom feeds. Don't use
    ESCAPE=HTML for titles in the templates for these feeds, and instead
    escape the title going in to the template. Previously, the title was
    sometimes double-escaped in a feed (if set via meta title), and sometimes
    not (if set from the page filename).
  * In the meta plugin, when a title is set, encode the html entities in it
    numerically. This works better in the current landscape of a rss spec that
    doesn't specify encoding, and variously broken feed consumers, according
    to <http://www.rssboard.org/rss-profile#data-types-characterdata>.
  * Correct some issues with display of unhandled preprocessor directives.
  * Apply a patch from Carl Worth adding support for using globs in link()
    in a PageSpec.
  * Explode some of the more insane regexps.
  * Add test suite for preprocessor directive parsing.
  * Fix wrapper generator and untaint code's handling of strings contining
    newlines.
  * Make the url absolution code for feeds significantly more robust.
  * Add typographyattributes configuration setting to typography plugin.

 -- Joey Hess <joeyh@debian.org>  Mon, 18 Jun 2007 21:21:56 +0100

ikiwiki (2.1) unstable; urgency=low

  [ Joey Hess ]
  * Use div layout for the signin and preferences forms, so that they can be
    styled using the stylesheet, rather than by creating signin and prefs
    templates.
  * Make the openid login form nicely styled.
  * Fix a bug that prevented clearing email or subscriptions.
  * Improve handling of edits of locked pages by users who are not yet signed
    in.
  * Make testpagespec more robust, including checking for missing/bad
    parameters.
  * Add all=no option to conditional, can be used to form conditionals that do
    not need to examine every page in the wiki.
  * Add the needsbuild hook. Plugins can use this to manipulate which files
    ikiwiki builds when refreshing the wiki.

  [ Josh Triplett ]
  * Add an account-creation password as a simple anti-spam mechanism. If
    set in the wiki setup, passwordauth will require the password in
    order to create an account.

  [ Joey Hess ]
  * Updated Czech translation from Miroslav Kure.
  * Apply patch from Paweł Tęcza to avoid using -L in Makefile as it's not
    available in older finds.
  * Make all templates have a footer div to ease themeing. Required template
    and style sheet updates, and unless you're using customised versions,
    you'll want to rebuild wikis on upgrade to this version to avoid
    inconsistencies.
  * Allow WIKINAME to to used in footers, as an example of something to put
    there.
  * Patch from hb to fix the pagestats plugin, which was broken by a past
    change to the backlinks() function.
  * Fix some bugs in password handling:
    - If the password is empty in preferences, don't clear the existing
      password.
    - Actually check the confirm password field, even if it's left empty.
  * Add a destpage parameter to the filter hook.
  * Fix links to smilies generated by the smiley plugin for inlined pages. The
    old links were often wrong, but often still worked by accident.
  * Add a test ensuring that the basewiki is self-contained and has no broken
    links.

 -- Joey Hess <joeyh@debian.org>  Sat, 19 May 2007 20:37:38 -0400

ikiwiki (2.00) unstable; urgency=low

  [ Josh Triplett ]
  * Avoid using GNU extensions to cp during "make install", which did
    not work on FreeBSD.  Thanks to Henrik Brix Andersen for the patch.

  [ Joey Hess ]
  * Use fieldsets in the preferences form to group related options together.
    Especially cleans up the ordering of the admin's preferences form.
  * Use a fieldset to set off the openid entry from the rest of the login
    form.
  * Enable openid logins by default.
  * Enable usedirs by default.

  [ Josh Triplett ]
  * fieldset support appeared in CGI::FormBuilder 3.05, so increase
    version in Depends on libcgi-formbuilder-perl to 3.05

  [ Joey Hess ]
  * If Net::OpenID::Consumer is not available, the openid module will quietly
    disable itself, this avoids needing a hard dependency on the perl module.

 -- Joey Hess <joeyh@debian.org>  Mon, 30 Apr 2007 00:43:02 -0400

ikiwiki (1.51) unstable; urgency=low

  [ Joey Hess ]
  * Support setting svnpath to "" for wikis that are rooted at the top of
    their svn repositories, with no trunk directory.
  * Minor template improvements by Alessandro.
  * In mercurial backend, untaint ipaddr when using it as the user for the
    commit. Thanks, Alexander Wirt. Closes: #420428
  * Fix aggregator to not warn when a feed contains no body content at all.
  * Work around bug #420636 by, if XML::Parser crashes, running the feed
    content though Encode::decode_utf8.

  [ Josh Triplett ]
  * Change basewiki CSS to not put a border around images used as links.

  [ Joey Hess ]
  * Move the footer div to enclose tags and links too.
  * More style sheet updates, remove the hack that used the tags div to create
    the footer border.
  * Due to template changes and style sheet changes that depend on them,
    wiki rebuilds are recommended on upgrade to this version.
  * Avoid .svn directories when installing from svn checkout.
  * Fix sending of commit mails when new pages are added via the web.
  * Add user(name) to the PageSpec for commit subscriptions.
  * pagespec_match() has changed to take named parameters, to better allow
    for extended pagespecs. The old calling convention will still work for
    back-compat for now.
  * The calling convention for functions in the IkiWiki::PageSpec namespace
    has changed so they are passed named parameters.
  * Plugin interface version increased to 2.00 since I don't anticipate any
    more interface changes before 2.0.
  * Updated Gujarati translation from Kartik Mistry. Closes: #421198
  * Make pagespec_match return an object that can be stringified to tell
    the reason why the match failed or succeeded.
  * Add testpagespec plugin, which might be useful to see why a pagespec isn't
    working as desired.

  [ Josh Triplett ]
  * Fix bestlink to use pagecase for pages in userdir, to support pages
    with non-lowercase filenames.

  [ Joey Hess ]
  * Include wikiname in syslogged messages.
  * Updated Polish translation from Paweł Tęcza.
  * Updated Czech translation from Miroslav Kure.
  * Updated Spanish translation from Victor Moral.
  * Apply patch from hb that uses the full path to a file when adding a file
    using the mercurial backend. Not 100% sure why it failed w/o the full
    path, but this still passes the test suite, and indeed, is how the test
    suite calls hg add.

 -- Joey Hess <joeyh@debian.org>  Sun, 29 Apr 2007 00:01:23 -0400

ikiwiki (1.50) unstable; urgency=low

  [ Josh Triplett ]
  * Add a graphviz plugin.
  * Suggests: graphviz
  * Enhance helponformatting and related documentation to supply more
    information about available preprocessor directives.
  * Add myself as a co-maintainer, with Joey's approval.

  [ Joey Hess ]
  * Add support for PROFILE=1 to the Makefile, this turns on profiling of the
    wiki build using Devel::Profiler (Dprof can't handle ikiwiki).
  * Add a new %destsources hash, which maps between a destination file and
    the source page used to create it, ie it's the reverse of %renderedfiles.
  * Use %destsources in htmllink and urlto for 20-50% speedup. Thanks
    Josh Triplett for the idea.
  * Optimise displaytime, trimming maybe 6% off the build time.

  [ Josh Triplett ]
  * Conflicts/Replaces/Provides the unofficial ikiwiki-plugin-table
    package, because ikiwiki now provides the table plugin, and thus has
    a file overlap with ikiwiki-plugin-table.
  * Add libtext-csv-perl to Suggests, for the table plugin.
  * Add libdigest-sha1-perl to Suggests, for sparkline and graphviz.
  * Add libtext-typography-perl to Suggests for the typography plugin.

  [ Joey Hess ]
  * Add postformtext parameter to inline.
  * Internal version number and installdir substitutions were lost, fix.
  * Apply patch from Ethan to improve an error message that should never
    happen.
  * Patch from Tuomov to link to the directory in feeds when usedirs is in
    effect. Note that this changes permalinks, so if you are already using
    usedirs you'll have to deal with that on upgrade to this version.
  * Add feedshow parameter to inline, which can be useful for eg, removing
    old posts from feeds when permalinks change.
  * Add .dpkg-tmp to prune regexp, so that if ikiwiki is run right as it's
    being upgraded by dpkg it will ignore dpkg temp files in the basewiki.

 -- Joey Hess <joeyh@debian.org>  Sun, 15 Apr 2007 16:02:05 -0400

ikiwiki (1.49) unstable; urgency=low

  [ Joey Hess ]
  * Add --post-commit option, which allows for the case of a split web server
    and RCS server (or a push mirror). With this the RCS server can have a
    real post-commit hook that sshs back to the web server, and runs ikiwiki
    in post-commit mode to update the wiki.
  * Fix urls generated by mirrorlist plugin.
  * Add a templates page to the basewiki. It will automatically list all
    available templates. Rename the old templates page to wikitemplates.
  * Include the note template in the basewiki.
  * Add a popup template in the basewiki. CSS based on some by Martin Krafft.
  * Make the note, popup, and plugin templates detect missing variables and be
    self-documenting, listing the available variables.
  * Hide excess backlinks and expand using CSS trick; control quantiy via
    the numbacklinks setting.
  * Finally apply the index.html patch, with thanks to everyone who worked
    on and supported creating it (especially Tuomov). This adds a "usedirs"
    option that makes ikiwiki use foo/index.html instead of foo.html as
    output page names. It is not yet enabled by default.
  * Fix a bug in the img plugin that caused thumbnailed files to not be
    tracked properly.
  * Make the OpenID library a reccommendation of the Debian package, rather
    than just a suggests, since OpenID is enabled by default.
  * Fix a bug that caused link(foo) to succeed if page foo did not exist.
  * Fix tags to page names that contain special characters.

  [ Josh Triplett ]
  * Use pngcrush and optipng on all PNG files.
  * Add neutral smileys ":|" and ":-|", and question icon smiley "(?)",
    with images taken from phpBB (GPL) and converted with gif2png.
  * Improvements to Description in debian/control:
    * Note that some plugins have additional dependencies, found among the
      Recommends and Suggests.
    * ikiwiki supports both RSS and Atom feeds.
    * Fix typos.
  * Add Homepage field.
  * Add XS-Vcs-Browser field.

  [ Joey Hess ]
  * Updated French translation from JLC. Closes: #417982
  * Reorder the icon in the template above the stylesheets, to avoid icon
    flashing during page load.
  * Fix smiley plugin to scan smileys.mdwn after it's updated, which fixes
    a bug caused by committing changes to smilies.mdwn.
  * Fix display of escaped wikilinks containing anchors.

  [ Josh Triplett ]
  * Remove stray semicolon in linkmap.pm.

 -- Joey Hess <joeyh@debian.org>  Sun, 08 Apr 2007 16:14:46 -0400

ikiwiki (1.48) unstable; urgency=low

  * Fix link() PageSpecs to not just look at the raw link text, but at where
    that given link points based on the page doing the linking. Note that this
    could make such PageSpecs match different things than before, if you
    relied on the old behavior of them only matching the raw link text.
  * This required changing the match_* interface, adding a third parameter.
  * Allow link() PageSpecs to match relative, as is allowed with globs.
  * Add postform option to inline plugin.
  * Add an bug tracker to the softwaresite example.
  * Make ikiwiki's stylesheet support printing by hiding parts of the page
    that shouldn't appear in a printout: Search box, actions bar,
    blog post form, tags, backlinks, and feed buttons.
  * Finally fixed the longstanding inline removal bug.
  * Renamed %oldpagemtime to a more accurately named %pagemtime and fix it to
    actually store pages' mtimes.
  * Add "mtime" sort parameter to inline plugin.
  * Fix mercurial backend to deal with empty commit messages.

 -- Joey Hess <joeyh@debian.org>  Sat, 24 Mar 2007 11:14:10 -0400

ikiwiki (1.47) unstable; urgency=low

  * Fix a security hole that allowed insertion of unsafe content via the meta
    plugins's support for inserting html link and meta tags. Now such content
    is passed through the htmlscrubber like everything else.
  * Unfortunatly, that means that some valid uses of those tags are no longer
    usable, and special case methods needed to be added for including
    stylesheets, and for doing openid delegation. If you use either of these
    in your wiki, it will need to be modified. See the meta plugin docs
    for details.

 -- Joey Hess <joeyh@debian.org>  Wed, 21 Mar 2007 14:05:00 -0400

ikiwiki (1.46) unstable; urgency=low

  * Fix a bug with inlined create page links, including Discussion links on
    blog post pages. The links will now create pages relative to the page that
    actually contains the link.
  * French update. Closes: #414597
  * Fix some broken logic in cgi creation of a subpage when a toplevel page
    with the same name already exists, and generally simplify the edit code.
  * Make ikiwiki -verbose -setup with a setup file that enabled syslog logging
    output the verbose build log to stdout, rather than to the syslog.
  * Detect the case of two people independently creating the same page at the
    same time, and let the second person resolve the conflict.
  * Applied a patch from Michał to make the mercurial backend pass --quiet to
    hg.
  * Fix a security hole that allowed a web user to insert arbitrary html in
    the title of a page due to missing escaping of titles in the meta plugin.

 -- Joey Hess <joeyh@debian.org>  Wed, 21 Mar 2007 01:51:30 -0400

ikiwiki (1.45) unstable; urgency=low

  * Allow for underscores to appear in page titles, if encoded appropriately
    (__95__) in filenames. Previously, all underscores were replaced with
    spaces. Thanks, Enrico Zini for noticing that bug.
  * Add "template" option to inline plugin to allow for use of customised
    templates.
  * Add titlepage template for inline plugin.
  * Add preview parameter to preprocesser calls, use this rather than the
    previous ugly hack used to avoid writing rss feeds in previews.
  * Fix the img plugin to avoid overwriting images in previews. Instead it
    does all the work to make sure the resizing works, and dummys up a resized
    image using width and height attributes.
  * Also fixes img preview display, the links were wrong in preview before.
  * Add a sparkline plugin.
  * Add a postsparkline plugin.
  * The slash escaping when adding to a blog from the CGI was not working
    since it ended up being double-escaped. Instead, just remove slashes.
  * Fix some nasty issues with page name escaping during previewing
    (introduced in 1.44).
  * Add a table plugin, derived from the one written by Victor Moral.
  * The underscore escaping support exposed a bug in edit links: Such links
    were titlepage escaped in the urls, and then doubly escaped by the CGI
    when editing. To fix this, I removed the titlepage escaping in the edit
    urls.
  * That means that *every edit link* on the wiki is potentially changed.
    Rebuilding wikis on upgrade to this version therefore necessary; enabled
    that in postinst.
  * Correct a deadlock that could occur in post-commit if the aggregate plugin
    was enabled and tried to lock the already locked wiki.

 -- Joey Hess <joeyh@debian.org>  Sat, 10 Mar 2007 21:11:05 -0500

ikiwiki (1.44) unstable; urgency=low

  * Patch by Ben to fix validaton of atom feeds by fixing the category tags.
  * Add a openidlogin-bg.gif to wikiicons and have the stylesheet use it for the
    OpenID login form rather than linking to a remote logo, to avoid various
    issues. Since there is not yet a license for the actual OpenID logo, this
    file is currently a blank image. Users who want to can copy
    http://openid.net/login-bg.gif into their wiki.
  * Allow setting NOTAINT=1 when building the wiki to remove taint checking
    flags, which can be useful on some hosting providers.
  * Fix a bug that made links like [[0|foo]] use "foo" as the link text,
    instead of "0".
  * Changed calling convention for httmllink slightly. The first three
    parameters remain the same, but additional options are now passed in using
    named parameters.
  * Change plugin interface version to 1.02 to reflect this change.
  * Add a new anchor option to htmllink. Thanks Ben for the idea.
  * Support anchors in wikilinks.
  * Add a "more" plugin based on one contributed by Ben to allow implementing
    those dreaded "Read more" links in blogs.
  * Don't error out if estcmd fails, just print a warning message. estcmd is
    too fragile to let it kill ikiwiki.
  * Make img plugin not fail immediately if Image::Magick is not available.
    This lets ikiwiki not build depend on perlmagic.
  * Detect old versions of xgettext and avoid using them.
  * perl is broken: print "" || die fails! Work around this insanity.
  * Smarter detection of no-op changes to po files.
  * Elegant patch from Ethan to clean up the display of page names in the
    dropdown when creating a new page.
  * Since the CGI had to drop the wiki lock to avoid deadlocking the
    commit hook, it was possible for one CGI to race another one and "win"
    the commit of both their files. This race has been fixed by adding a new
    commitlock, which when locked by the CGI, disables the commit hook
    (except for commit mails). The CGI then takes care of the updates the
    commit hook would have done.
  * French translation update. Closes: #411899
  * Patch from HenrikBrixAndersen to fix a broken use of foreach in the
    search plugin.
  * Correct a bug that could lead to infinite looping after signin in some
    circumstances.
  * Patch from Ethan to improve behavior if a page is deleted or moved while
    someone is editing it.
  * Some cleanup of field setting in the failed edit and conflict handling
    code.

 -- Joey Hess <joeyh@debian.org>  Sat, 24 Feb 2007 20:16:35 -0500

ikiwiki (1.43) unstable; urgency=low

  * Allow plugins to add new types of tests that can be used in PageSpecs.
  * Add a "conditional" plugin, which allows displaying text if a condition
    is true. It is enabled by default so conditional can be used in the
    basewiki.
  * Use conditionals in the template for plugins, so that plugin pages
    say if they're currently enabled or not, and in various other places
    in the wiki.
  * Updated Spanish translation.
  * Make the basewiki be full of symlinks to pages that should be the same
    in the doc wiki. This will allow direct edits to alter the base wiki
    without manual munging.
  * Fix the template, toggle, and conditional plugins to filter text before
    preprocessing it.
  * Fix smiley plugin to support smileys at the very beginning or end of
    the content.
  * Allow multiple tag settings to appear in a single page.
  * Many changes to make ikiwiki very resistant to write failures
    including out of disk space situations. ikiwiki should never leave
    truncated files, and if the error occurs during a web-based file edit,
    the user will be given an opportunity to retry.
    Inspired by the many ways Moin Moin destroys itself when out of disk. :-)
  * Fix syslogging of errors.
  * Patch from Ethan to allow using meta tags to set creation dates of pages.
  * Add a prettydate plugin that formats dates in a more readable fashion.
    (I had to get a pretty date somehow today..)
  * Updated Czech translation.
  * Avoid potential syslog format string issue, although only older versions
    of perl are vulnerable and it is not known to really be exploitable from
    ikiwiki.
  * Add explicit module prereqs to Makefile.PL
  * New domain name for ikiwiki: ikiwiki.info. Update your links.

 -- Joey Hess <joeyh@debian.org>  Sun, 18 Feb 2007 23:26:32 -0500

ikiwiki (1.42) unstable; urgency=low

  * Fix several more missing translations of Discussion.
  * Fix for missing backlinks() in pagestats plugin.
  * Add canedit hook, allowing arbitrary controls over when a page can be
    edited.
  * Move code forcing signing before edit to a new "signinedit" plugin, and
    code checking for locked pages into a new "lockedit" plugin. Both are
    enabled by default.
  * Remove the anonok config setting. This is now implemented by a new
    "anonok" plugin. Anyone with a wiki allowing anonymous edits should
    change their configs to enable this new plugin.
  * Add an opendiscussion plugin that allows anonymous users to edit
    discussion pages, on a wiki that otherwise wouldn't allow it.
  * Lots of CGI code reorg and cleanup.
  * Avoid using lots of memory when copying large non-html files.
    Yes, you can keep videos in the wiki..
  * Add feedshow option to allow reducing the number of items included in
    an rss or atom feed.
  * Change based on a patch from Ethan to support relative matching in
    PageSpecs, by using "./".
  * pagespec_match() has grown a new third parameter to support this.
  * Add "reverse" option to inline to invert sort orders.
  * Drop the BSD license for the templates and basewiki, and just allow them
    to be used as close to public domain as possible.
  * viewcvs is now viewvc (in Debian unstable), update everything to use the
    new name.
  * Fix a security hole that allowed a web user to edit images and other
    non-page format files in the wiki. To exploit this, the file already had
    to exist in the wiki, and the web user would need to somehow use the web
    based editor to replace it with malicious content.
    (Sorry Josh, this means you can't edit style.css directly anymore,
    although I do appreciate your fixes, actually..)

 -- Joey Hess <joeyh@debian.org>  Sat, 10 Feb 2007 15:37:39 -0500

ikiwiki (1.41) unstable; urgency=low

  * Gettext 1.04 or up is needed for the OO interface that ikiwiki needs,
    if an older version is installed, just don't gettext strings, instead of
    crashing.
  * Added smileys for Moin Moin compatability.
  * Fix handling of discussion links on discussion pages when l10n is used.
  * Make gitorigin_branch and gitmaster_branch configurable via the setup
    file. Closes: #408599
  * French translation update. Closes: #408593
  * Improve use of svn merge, by specifying the file to merge, rather than
    chdiring to the srcdir (which wasn't right when merging in a subdir).
    Thanks Ethan.
  * Always call rcs_update after a commit during a web edit, to work around
    the problem described in bugs/svn_fails_to_update. Thanks to Ethan for the
    analysis and patch.
  * Replace underscores in shortcut texts with spaces when formatting for
    display. This allows using a shortcut like [[wikipedia War_of_1812]],
    which links to the correct remote page, but is displayed nicely.
  * When building the doc wiki, build with LANG=C.
  * More gettext fun.
  * Fix openid signin secret generation code. This fixes the bug that made
    all openid signins fail the first time, and then succeed the second
    time.

 -- Joey Hess <joeyh@debian.org>  Tue, 30 Jan 2007 02:36:53 -0500

ikiwiki (1.40) unstable; urgency=low

  * Fix missing categories in rss/atom feeds.
  * Add French translation by Jean-Luc Coulon. Closes: #406881
  * Fix bogus use of CDATA in atom feeds. Closes: #406898

 -- Joey Hess <joeyh@debian.org>  Sun, 14 Jan 2007 21:42:27 -0500

ikiwiki (1.39) unstable; urgency=low

  * Add a rawhtml plugin that allows copying raw html files from the srcdir.
  * Fix --locale to control LC_ALL now.
  * Include the pot file in the source tarball. Closes: #405890
  * Add a Swedish translation by Daniel Nylander. Closes: #406410
  * Add a Czech translation by Miroslav Kure.
  * Add a Bulgarian translation by Damyan Ivanov. Closes: #406580
  * Add a Gujarati translation by Kartik Mistry. Closes: #406635
  * Add a Vietnamese translation by Clytie Siddall.
  * Fix encoding issue with use of Locale::Gettext. Seems that the OO
    interface returns proper utf-8 decoded strings, unlike the traditional
    interface, so use the OO interface.
  * Search in default location for templates as a fallback when templatedir is
    pointed elsewhere, so that only modified templates need to be copied into
    a templatedir. Based on work by JeremyReed.
  * In the aggregator, check for and deal with post filenames that are
    longer than the maximum file length.
  * Change the RecentChanges page to show the path of changed pages.
  * Various minor bugfixes.

 -- Joey Hess <joeyh@debian.org>  Sat, 13 Jan 2007 23:30:20 -0500

ikiwiki (1.38) unstable; urgency=low

  * Corrected a bum regexp in openid munging.
  * Added a Spanish translation by Victor Moral.
  * A few translation infrastructure fixes.
  * Added a Polish translation by Paweł Tęcza.

 -- Joey Hess <joeyh@debian.org>  Fri,  5 Jan 2007 23:13:59 -0500

ikiwiki (1.37) unstable; urgency=low

  * Add mirrorlist plugin.
  * Fixed permissions of some files that were 600 in the tarball. (Did not
    affect the deb).
  * Avoid creating edit links when the cgi url is not known.
  * Avoid displaying discussion links at all, if there's not a discussion
    page, when the cgi url isn't known.
  * Before, svn was used as the RCS by default unless configured otherwise,
    now it defaults to using no RCS unless configured to do so, to avoid some
    suprising behavior when using a setup file and not uncommenting any RCS
    options.
  * Fix some bugs in the commit email sending code.
  * Improve code that ignores files in the underlaydir if the srcdir has a
    file building the same page. Now it will work even if the extensions of
    the source files differ.
  * Initial work on internationalization of the program code. po/ikiwiki.pot
    is available for translation.
  * Export gettext() from IkiWiki module.
  * Don't put discussion links on discussion pages.
  * Allow disabling of plugins included in goodstuff.
  * Add a textile format plugin contributed by mazirian.
  * If a userdir is configured, links to pages in it can be made without
    specifying the path. This allows for easy signing of comments by linking
    to your page in the userdir.
  * Escape slashes in page titles entered in the blog post form.
  * Munge openids of the form somehost.com/user (trial, may revert).

 -- Joey Hess <joeyh@debian.org>  Sun, 31 Dec 2006 17:31:22 -0500

ikiwiki (1.36) unstable; urgency=low

  * Fix various links on the hyperestraier pages.
  * Use POST for poll to avoid some robots.
  * Fix sometimes broken links to Discussion pages from blog pages.
  * Add userdir config setting.
  * Fix man page perms in install.
  * Fix an issue with inlining a page with a rss feed inside another
    page with an rss feed.
  * Turn $config{wiki_file_prune_regexps} into an array that is easier to
    manipulate.
  * Only exclude rss and atom files from processing if the inline plugin
    is enabled and that feed type is enabled. Else it's just a copyable file
    type.
  * Move rss and atom option handling code into the inline plugin.
  * Applied a rather old patch from Recai to fix the "pruning is too strict"
    issue. Now you can have wiki source directories inside dotdirs and the
    like, if you want.
  * Patch from Emanuele Aina to fix modification time code in mercurual
    backend.
  * Add support for links of the form [[/foo]]
  * Fix code to make absolute urls for rss feeds, was missing some urls.
  * Fix double-escaping of html entities in titles etc in rss feeds
    that occured if escaped characters were present in the page filename.

 -- Joey Hess <joeyh@debian.org>  Fri, 22 Dec 2006 15:55:05 -0500

ikiwiki (1.35) unstable; urgency=low

  * Fix daemonisation code to only do daemon setup things after forking the
    child process.
  * The hack used to make the pagetemplate hook have access to the editpage
    template won't work with CGI::FormBuilder 3.0401, so disable it for now.
  * CGI::FormBuilder 3.0401 seems to work ok now with ikiwiki, although
    there might still be bugs lurking..

 -- Joey Hess <joeyh@debian.org>  Fri,  1 Dec 2006 19:14:36 -0500

ikiwiki (1.34.2) unstable; urgency=low

  * Allow /etc/ikiwiki/wikilist to list just the names of users, if so then
    ~user/.ikiwiki/wikilist will be read.
  * Fix url absolution code in inline plugin to support class and id fields in
    links and imgs, and to support anchor urls.
  * More build deps updates.
  * /dev/null fortune failures

 -- Joey Hess <joeyh@debian.org>  Tue, 28 Nov 2006 12:58:47 -0500

ikiwiki (1.34.1) unstable; urgency=low

  * Add libtime-duration-perl to build deps, as it's used by the svn module
    which is now tested at build.

 -- Joey Hess <joeyh@debian.org>  Mon, 27 Nov 2006 12:26:12 -0500

ikiwiki (1.34) unstable; urgency=low

  * Add an openid plugin to support logging in using OpenID.
  * Web commits by OpenID users will record the full OpenID url for the user,
    but in recentchanges, these urls will be converted to a simplified display
    form+link.
  * Modified svn, git, tla backends to recognise such web commits.
  * Move httpauth support to a plugin.
  * Add openidsignup config option.
  * Make the openid plugin support the callbacks from myopenid.com via its
    affiliate program.
  * Add toggle plugin.
  * Add a poll plugin.
  * Add quick mode for archive page generation.
  * Introduce the goodstuff bundle. This is a kind of plugin, that just enables
    many other plugins. It's an easy way to boost ikiwiki from its default,
    basic wiki, to a full-featured wiki, without manually picking the right
    set of plugins. New plugins will be added to goodstuff from time to
    time.
  * Change how post signin actions are propigated through the signin process;
    they're now stored in the session.
  * Add optional "desc" parameter to shortcut definitions.
  * Avoid locking the wiki at all when handling some basic cgi stuff
    (searches, recentchanges).
  * Add "last" parameter to hook function. Very basic ordering, and hopefully
    nothing more spohisticated will be needed.
  * Add formbuilder_setup and formbuilder hooks.
  * Split out a passwordauth module, that holds all the traditional password
    based authentication etc code. It's enabled by default, but can be disabled
    if you want only openid or some other auth method.
  * Rename ikiwiki.pl so MakeMaker doesn't see it, and install it.
  * Add some code to the build system that tries to determine if the
    lib installation directory is in @INC. If it's not, munge ikiwiki
    to hardcode the path to the lib directory. This should allow installing
    ikiwiki in nonstandard locations, including home directories, by just
    setting PREFIX at build time.
  * Fix nested examples directory in deb.
  * Add a test suite for the mercurial backend, contributed by Emanuele Aina.
  * Add a test suite for the svn backend.
  * Add a test suite for the git backend, from Recai
  * Daemonize before sending RPC pings, since that can take a while
    and/or hang.
  * Daemonize before sending commit mails, as that can also take a long
    time/hang if the mail server is unhappy.
  * Factor out commit mail sending code into new function.
  * Change rcs_commit, it is now passed the name of the user doing the commit
    and their IP address, and needs to construct its own commit message
    containing them, or do something more appropriate for the given RCS.
  * Add softwaresite example.
  * Mercurial backend improvements, including --get-ctime support. (Emanuele
    Aina)
  * Git backend improvements, including bug fixes and better robustness,
    from Recai.

 -- Joey Hess <joeyh@debian.org>  Sun, 26 Nov 2006 20:46:56 -0500

ikiwiki (1.33) unstable; urgency=low

  * Fix issue with aggregate plugin updating expired pages.
  * Avoid syntax errors in templates used by the template plugin crashing
    ikiwiki.
  * Enable utf8 file IO in aggregate plugin.
  * Fix some issues with the new registration form.
  * Patch from Ethan Glasser Camp to add a skip option to the inline plugin.
  * Make sure to check for errors from every eval.
  * Fix img plugin's handling of adding dependencies for images that do not
    yet exist.
  * Work around a strange bug in CGI::FormBuilder 3.0401 that makes
    FORM-SUBMIT unusable on customised formbuilder templates. For now,
    hardcode the submit buttons in editpage.tmpl instead of using the
    template variable, which is ok, since the buttons are static.
  * Work with hyperestraier 1.4.9.

 -- Joey Hess <joeyh@debian.org>  Wed, 15 Nov 2006 18:32:26 -0500

ikiwiki (1.32) unstable; urgency=low

  * Add a separate pass to find page links, and only render each page once,
    instead of over and over. Typical speedup is ~4x. Max possible speedup:
    8x.
  * Add "scan" parameter to hook(), which is used to make the hook be called
    during the scanning pass, as well as the render pass. The meta and tag
    plugins need to use the new scan parameter, so will any others that modify
    %links.
  * Now that links are calculated in a separate pass, it can also
    precalculate backlinks in one pass, which is O(N^2) instead of the
    previous code that was O(N^3). A very nice speedup for wikis with lots
    (thousands) of pages.
  * Stylish update to the ikiwiki logo, thanks to Recai Oktaş and Selçuk
    Erdem.
  * Add a default stylesheet entry for the pagecloud.
  * Add examples page with some examples of things that can be done using
    ikiwiki, like a weblog. The examples can be copied into a user's wiki
    for a quick start, without needing to learn everything about how to put
    them together.
  * Install the source of the examples into /usr/share/doc/ikiwiki/examples.
  * Add perlmagick to build-depends so syntax check of img plugin works.
    Closes: #396702
  * Improve login/register process, the login dialog has only name and
    password fields, which allows more web browsers to regognise it as a login
    field, and is less confusing.
  * Implemented expiry options for aggregate plugin.
  * Use precalculated backlinks info when determining if files need an update
    due to a page they link to being added/removed. Mostly significant if
    there are lots of pages.
  * Remove duplicate link info when saving index. In some cases it could
    pile up rather badly. (Probably not the best way to deal with this
    problem.)
  * Patch from James Westby to support podcasting, photoblogging, vidcasting,
    or what have you, by creating enclosures for non-page items that are
    included in feeds.

 -- Joey Hess <joeyh@debian.org>  Fri,  3 Nov 2006 14:46:37 -0500

ikiwiki (1.31) unstable; urgency=low

  * Patch from Paweł Tęcza to cp -a the templates in the Makefile.
  * Change the rss feed title from the wikiname to the page title, with
    an exception for the wiki's toplevel index page, which will still use the
    wikiname as the feed title.
    Overriding the page title with meta title already overrode the rss feed
    tittle.
  * Add an img plugin, based on Christian Mock's img plugin, but stripped
    down to the bare essentials. Useful for handling large images on websites.
  * Sanitize possibly problimatic characters out of the polygen grammar names,
    just in case. Should not be exploitable anyway, since it only tries to run
    polygen after finding the specified grammar file.
  * Add missing dependency on the URI perl module.
  * Add basic spam fighting tool for admins: An admin's prefs page now allows
    editing a list of banned users.

 -- Joey Hess <joeyh@debian.org>  Fri, 27 Oct 2006 23:16:33 -0400

ikiwiki (1.30) unstable; urgency=low

  * Add no_override parameter to hook().
  * Add a shortcut plugin, inspired by Victor Moral's contributed shortcuts
    plugin, but featuring a more ikiwiki-ish syntax and with shortcuts that
    can be configured using a page in wiki.
  * Fix support for --pingurl at the command line.
  * Fix a subtle bug in will_render that broke some builds, by only clearing
    items from renderedfiles the first time per build.
  * Wrap entire technortati ping operation in an eval to catch all possible
    failure modes, after I observed a simple ->value crashing ikiwiki when
    a ping failed.

 -- Joey Hess <joeyh@debian.org>  Mon, 16 Oct 2006 15:17:38 -0400

ikiwiki (1.29) unstable; urgency=low

  * Patch from Paul Tötterman to use CP in the Makefile.
  * Patch from Alec Berryman adding a http_auth config item that allows
    using HTTP Authentication instead of ikiwiki's built in authentication.
    Useful for eg, large sites with their own previously existing user auth
    setup. Closes: #384534
  * Change %renderedfiles to store an array of files rendered from a given
    source file, to allow tracking of extra rendered files like rss feeds.
  * Note that plugins that accessed this variable will need to be updated!
    The plugin interface has been increased to version 1.01 for this change.
    As few plugins use %renderedfiles I haven't done anything else to ensure
    compatability of old plugins.
  * Add will_render function to the plugin interface, used to register that a
    page renders a destination file, and do some security checks. Previously
    but no longer rendered files will be cleaned up.
  * Use will_render in the inline and linkmap plugins.
  * You will need to rebuild your wiki on upgrade to this version.
  * Atom feed support based on a patch by Clint Adams.
  * Add feeds=no option to inline preprocessor directive to turn off all types
    of feeds.
  * $IkiWiki::version now holds the program version, and is accessible to
    plugins.
  * Make the aggregate plugin emphasize error messages.
  * Patch from Recai to limit recentchanges to displaying max 10 files for a
    given changeset (to avoid large number of file changes excessively
    bloating the page).

 -- Joey Hess <joeyh@debian.org>  Fri, 13 Oct 2006 23:14:28 -0400

ikiwiki (1.28) unstable; urgency=low

  * inline: Add ability to sort by page name, based on a patch from
    Benjamin A'Lee.
  * Fix a forkbomb in various calls to IPC::Open2, which has a highly
    braindead interface. Closes: #389383
  * Don't rm -rf ikiwiki on distclean, since a) there's no such file
    and b) those poor Mac OSX users and their case insensative files!
  * Don't fail syntax check if Text::Typography isn't installed.
    Closes: #389406

 -- Joey Hess <joeyh@debian.org>  Tue, 26 Sep 2006 02:08:17 -0400

ikiwiki (1.27) unstable; urgency=low

  * Work on firming up the plugin interface:
    - Plugins should not need to load IkiWiki::Render to get commonly
      used functions, so moved some functions from there to IkiWiki.
    - Picked out the set of functions and variables that most plugins
      use, documented them, and made IkiWiki export them by default,
      like a proper perl module should.
    - Use the other functions at your own risk.
    - This is not quite complete, I still have to decide whether to
      export some other things.
  * Changed all plugins included in ikiwiki to not use "IkiWiki::" when
    referring to stuff now exported by the IkiWiki module.
  * Add a module version number to IkiWiki, so you can "use IkiWiki '1.00'"
    to declare which version of the interface your plugin needs.
  * Anyone with a third-party ikiwiki plugin is strongly encouraged
    to make like changes to it and avoid use of non-exported symbols from
    "IkiWiki::".
  * Link debian/changelog and debian/news to NEWS and CHANGELOG.
  * Support hyperestradier version 1.4.2, which adds a new required phraseform
    setting.
  * If an inlined page has a permalink, link the page title to that.
  * Patch from Recai to use utf8 when reading the setup file, so that
    utf8 wikinames from there will be used properly.
  * Patch from Recai to kill utf-8 on the wiki name when generating the
    session cookie.
  * Change ddate plugin to use the DateTime::Calendar::Discordian perl module.
  * Fix a baseurl problem in hyperestradier search results.
  * Add a stub local.css to avoid problems with 404's.
  * Patch from Recai to fix a wide character warning from the search plugin
    during setup if the wikiname contains utf8.
  * Yet another fix for those poor case-insensative OS X users.
  * pagetemplate hooks are now also called when generating cgi pages.
  * Add a favicon plugin, which simply adds a link tag for an icon to each
    page (and cgis).
  * Patch from James Westby to deal with the case where you're editing a
    new page, hit cancel, and need to be redirected to somewhere sane.
  * Various documentation improvements by various wiki users.
  * Support Text::Markdown from CPAN, which has a different interface from
    the original markdown or the one in Debian.
  * Version the libcgi-session-perl dependency, some features that need
    the new version are used in some cases (sslcookie).
  * Numerous tla fixes from Clint.
  * Updated ikiwiki.svgz from Recai, includes an icon and is used to generate
    a multi-resolution favicon.ico.
  * README.Debian: typo Closes: #388110
  * chomp trailing newline at the end of templates read in by the template
    plugin, to allow use of the template preprocessor directive in
    whitespace-sensative situations. Closes: #387073
  * Patch from James Westby to make the location of the estseek.cgi script
    configurable.
  * Add typography (SmartyPants) plugin by Recai.
  * Add --render mode, which can be used to preview an edit at the command
    line by test rendering a single page.
  * Add a googlecalendar plugin. A bit special-purpose, but it shows
    one way to to deal with user-supplied content that could cause XSS
    issues w/o the htmlscrubber, and won't survive the scrubber.

 -- Joey Hess <joeyh@debian.org>  Sun, 24 Sep 2006 00:02:21 -0400

ikiwiki (1.26) unstable; urgency=low

  * Add a missing -n to tla undo call.
  * otl2hmtl can't be safely used with IPC::Open2 since it sometimes
    writes before consuming its whole stdin. Avoid this deadlock.
  * Fix alt tags for outline checkboxes.

 -- Joey Hess <joeyh@debian.org>  Fri,  8 Sep 2006 16:24:16 -0400

ikiwiki (1.25) unstable; urgency=low

  * Add proper waitpid calls for open2ed processes throughout to avoid
    zombies; this hit htmltidy especially badly.
  * Drop real uid/gid in the suid wrapper, thus allowing commits to remote
    subversion repos and fixing some other issues.
  * Add support for tla, contributed by Clint Adams. Closes: #385936
  * Add support for mercurial, contributed by Emanuele Aina.
  * Include <link rel> tag for RSS feeds, used by some aggregators and
    firefox to find the feed.
  * Add a linkmap plugin (requires graphviz).

 -- Joey Hess <joeyh@debian.org>  Fri,  8 Sep 2006 01:54:14 -0400

ikiwiki (1.24) unstable; urgency=low

  * Simplify the data structure returned by rcs_recentchanges to avoid
    each rcs plugin needing to form complex strings on its own.
  * Fix another destpage issue in the inline directive. Closes: #385512
    again.

 -- Joey Hess <joeyh@debian.org>  Sun,  3 Sep 2006 15:46:45 -0400

ikiwiki (1.23) unstable; urgency=low

  * Allow inline directives to be nested inside eg, sidebars. Closes: #385512

 -- Joey Hess <joeyh@debian.org>  Sun,  3 Sep 2006 12:14:45 -0400

ikiwiki (1.22) unstable; urgency=low

  * Change how the stylesheet url is determined in the templates: Remove
    STYLEURL and add BASEURL to all templates (some already had it). This
    new more general variable can be used to link to other things (eg, images)
    from the template, as well as stylesheets.
  * Fix a bug introduced last version to do with nested inlines.
  * Allow preprocessor directives to span multiple lines, both to make
    long ones with lots of values easier to write, and to allow for ones with
    multi-line quoted values.
  * Allow preprocessor directives to contain python-like triple-quoted
    text blocks, for easy nesting of quotes inside.
  * Add a template plugin.
  * Make pagespec merge code smarter about merging duplicate pagespecs.
  * Patch from Jordà Polo to make Setup::Standard support hashes in config
    files.
  * Change order of linkify and preprocess; first preprocess and then linkify.
    This allows passing a wikilink inside a parameter to a preprocessor
    directive without it being expanded to html, and leaking out of the
    parameter, which had required some non-obvious use of triple-quoting
    to avoid. Note that any preprocessor plugins that output something
    that looks like a wikilink will now have it treated as such; AFAIK
    this doesn't change any behavior though except for the template plugin.
  * Enable preprocessor directives when previewing an edit.
  * Make all pages pull in a local.css style sheet, if present. This won't
    be included in ikiwiki, but can be created to make local styling changes
    w/o needing to merge in every new change to the distributed style.css.
  * Use DESTDIR and not PREFIX to specify installation prefix for packaging.
  * Support running "perl Makefile.PL PREFIX=foo" to build ikiwiki to run
    from a different directory.
  * Generalised preprocesser loop protection code.
  * Patch from James Westby to allow a description to be set for rss feeds.
  * Patch from James Westby to add a template for the search form.
  * Added a ddate plugin.
  * Patch from James Westby to add a --sslcookie switch, which forces
    cookies to only be sent over ssl connections to avoid interception.
  * Fix preferences page on anonok wikis; still need to sign in to get
    to the preferences page.
  * Add toc (table of contents) plugin.
  * Change htmlize, format, and sanitize hooks to use named parameters.
  * Patch from James Westby to add an actions option to inline; this
    adds Edit and Discussion links at the end of blog entries.
  * Due to some css changes, you'll want to rebuild your wiki on upgrade
    to this version. Will be handled automatically by the deb.
  * Add processed date to aggregate preprocessor directive status output.

 -- Joey Hess <joeyh@debian.org>  Fri,  1 Sep 2006 22:03:34 -0400

ikiwiki (1.21) unstable; urgency=low

  * Add a tail fin^W^Wsidebar plugin by Tuomo Valkonen.
  * If a page links to itself, mark up the link text in a span with
    class="selflink" so that it can be styled. I don't have a useful style
    defined for that though.
  * Call filter hooks on inlined page content.
  * Support inlining pages raw, rather than creating a blog.
  * Clean up yes/no parameter parsing in inline plugin.
  * Implemented better cycle detection in the inline plugin; nested inlines
    will now work.
  * Add a map plugin contributed by Alessandro Dotti Contra.
  * Add otl format plugin, which handles files as created by vimoutliner.
  * Fix ikiwiki-mass-rebuild to work in the way the postinst uses it.
  * Add first draft at a Restructured Text (rst) plugin, by Sergio
    Talens-Oliag. Note that this has many known issues -- see the caveats on
    the plugin's page.
  * Credit everyone who wrote a plugin on the plugins' wiki pages.
  * Fix utf-8 in blog post form.

 -- Joey Hess <joeyh@debian.org>  Sun, 20 Aug 2006 16:42:54 -0400

ikiwiki (1.20) unstable; urgency=low

  * Relicense the templates and basewiki under the 2-clause BSD license.
    Since these can easily become part of other people's websites, they
    should be under as permissive a license as possible.
  * Add --syslog config option, to log to the syslog.
  * Catch failing IPC::Open2 in tidy plugin and retry in case this is a
    transient failure to fork (which I've seen happen in the wild).
  * Fix a bug in the aggregator introduced last version that caused all
    aggregator state to be lost during a non-aggregating build.

 -- Joey Hess <joeyh@debian.org>  Thu, 17 Aug 2006 19:05:56 -0400

ikiwiki (1.19) unstable; urgency=low

  * Fix several related bugs in page type determination during online editing.
  * Add some locking to prevent 2 aggregators from running at once.
  * Fix an infinite loop in the aggregator when finding a unique filename.

 -- Joey Hess <joeyh@debian.org>  Wed, 16 Aug 2006 13:46:25 -0400

ikiwiki (1.18) unstable; urgency=low

  * The last release accidentially installed ikiwiki as ikiwiki.pl, now fixed.
  * Add --version.
  * Man page format fixups.
  * If the meta plugin overides the page title, set a title_overridden
    variable in the template to true. This allows doing things with the
    templates conditional on the title being overriden.
  * Add a %pagecase which maps lower-case page names to the actual case
    used in the filename. Use this in bestlinks calculation instead of
    forcing the link to lowercase.
  * Also use %pagecase in various other places that want to check if a page
    with a given name exists.
  * This means that links to pages with mixed case names will now work,
    even if the link is in some other case mixture, and mixed case pages
    should be fully supported throughout ikiwiki.
  * Recommend rebuilding wikis on upgrade to this version.

 -- Joey Hess <joeyh@debian.org>  Sat, 12 Aug 2006 22:10:48 -0400

ikiwiki (1.17) unstable; urgency=low

  * Disable tidy generator tag.
  * Move tidy back to sanitize hook, found out how to only show body.
  * Turn off tidy indentation too.
  * Turn on HTML::Template loop_context_vars; not actually used in stock
    templates but can be useful for things like making comma-delimited lists
    of tags or what have you.
  * Remove <br> from end of aggregate preprocessor directive output.
  * Ship ikiwiki executable as ikiwiki.pl in source to avoid issues on
    case-sensative filesystems like OSX.
  * Improve markdown loading. First, try to load it as a proper perl module,
    in case it was installed as one. Then fall back to trying
    /usr/bin/markdown.
  * Document in install page how to install markdown, since it has no
    installation procedure in the upstream tarball.
  * Set die_on_bad_params => 0 for all templates, to allow users to modify
    them without annoyances.
  * Suck in the page content when generating an inline archive page, to work
    around the meta plugin's lack of caching of title metadata across runs.

 -- Joey Hess <joeyh@debian.org>  Sat, 12 Aug 2006 12:52:13 -0400

ikiwiki (1.16) unstable; urgency=low

  * Try to handle relative links in aggregated feeds. However,
    the current support is a crude hack due to limitations of XML::Feed:
    xml:base is not supported, neither is Content-Location. And of course,
    relative links in RSS feeds are ill-undefined..
  * Make aggregator save permalinks and author name to pages as metadata.
  * Add permalink and author support to meta plugin, affecting RSS feeds
    and blog pages.
  * Various CSS and formatting changes.
  * Encode link and guid urls in rss feeds to avoid illegal utf8 slipping in.
  * Add xhtml files to the default prune regexp.
  * Also generate rel=bookmark links for permalinks.
  * Fix the htmltidy plugin, which wasn't working due my breaking it when
    I added it..
  * Don't run tidy with -xml as that fails if the input is not well-formed.
    Run it with -asxhtml instead, so it will output well-formed xhtml no
    matter what the input.
  * Disable tidy warnings too.
  * Add a new format hook, and make tidy use it, since tidy can really only
    operate on and output complete html documents, not the body chunks
    that sanitise gets.
  * Fix dates in rss feeds if running localised, so they're still rfc 822.

 -- Joey Hess <joeyh@debian.org>  Fri,  4 Aug 2006 20:48:36 -0400

ikiwiki (1.15) unstable; urgency=low

  * Remove CDPATH and other env vars perl taint checking doesn't like.
    Closes: #381279
  * Added created_before and created_after PageSpec limits.

 -- Joey Hess <joeyh@debian.org>  Thu,  3 Aug 2006 13:00:57 -0400

ikiwiki (1.14) unstable; urgency=low

  * Memoize pagespec translation, this speeds up a build of the ikiwiki tree
    by 10% or so.
  * Fix stupid bug in date matching, patch from Roland Mas. Closes: #381132
  * Added many unit tests for pagespec_match.

 -- Joey Hess <joeyh@debian.org>  Wed,  2 Aug 2006 11:34:06 -0400

ikiwiki (1.13) unstable; urgency=low

  * ikiwiki can now download and aggregate feeds with its new aggregate
    plugin, so it's possible to implement a Planet using ikiwiki!
  * Add a run_hooks function for the common task of running all hooks of a
    given type.
  * Add a savestate hook.
  * Don't put blog post forms on pages if there's no cgiurl set.
  * --setup --refresh no longer rebuilds wrappers. Use --setup --refresh
    --wrappers to do that.
  * Add %IkiWiki::forcerebuild to provide a way for plugins like aggregate
    to update pages that haven't changed on disk.
  * Change meta tags to use html entity-escaped text for values, so that
    quotes and such can be represented in title tags.
  * Depend and build-depend on HTML::Parser for HTML::Entities which is used
    for the above.
  * Make --rebuild also cause --aggregate to re-download and write aggregated
    pages.
  * Avoid outputting duplicate meta info.
  * Include title metadata on aggregated posts for capitalised and un-munged
    titles.
  * Title metadata of inlined pages now shows up in blogs and rss feeds.
  * Fix issue with unicode filenames and updating the hyper estradier search
    index. (Aka Please Please Please, let that be the last one.)
  * Patch from Roland Mas to support an rss=no parameter to inline directives.
    Closes: #380743
  * Renamed GlobLists to PageSpecs.
  * PageSpecs can now include nested parens, "and", and "or". This remains
    backwards compatible to the old GlobList format. It's implemented by
    treating the GlobList as a very limited microlanguage that is transformed
    to perl code that does the matching.
  * The old GlobList format is deprecated, and I encourage users to switch to
    using the new PageSpec format. Compatability with the old format will be
    removed at some point, possibly by 2.0.
  * Wiki rebuild needed on upgrade to this version due to PageSpec change.
  * Add support for creation_month and creation_year to PageSpec.
    Closes: #380680
  * Changes to index file encoding.

 -- Joey Hess <joeyh@debian.org>  Tue,  1 Aug 2006 21:21:19 -0400

ikiwiki (1.12) unstable; urgency=low

  "Viva l'Italia!"
  * New pagestats plugin from Enrico, which can generate a table counting
    the backlinks for each page, or a del.icio.us style cloud.
  * Build-depend on libtext-wikiformat-perl, so that the syntax check of
    the wikiformat plugin works. Thanks, Emanuele Aina.
  * Patch from Alessandro Dotti Contra to clean up backlinks and navbar
    display, running them through pagetitle. This removes ugly underscores and
    other gunk from the display, much nicer. You may want to rebuild your wiki
    when upgrading to get the cleanup globally.
  * Polygen plugin from Enrico.
  * htmltidy plugin from Faidon.
  * Locale patch from Faidon:
    - Adds a locale setting to setup files.
    - Proper local time, if the locale configuration option is used.
    - Support for UTF-8 (or ISO-8859-X) filenames in SVN. Before this patch,
      commiting (or even rcs_updating) on repositories with UTF-8 filenames was
      impossible.
  * Add getopt hook type, this allows plugins to add new command-line options.
  * Add --tagbase option to tag plugin.
  * Add exclude option in setup files, works same as --exclude.
  * Put categories in rss feeds for tagged items.
  * Allow preprocessor directives to be expanded in inlined blog pages.
    However, to avoid inlining loops etc, don't expand inline directives in
    inlined pages.
  * fortune plugin (trivial)
  * Tag plugins according to type.

 -- Joey Hess <joeyh@debian.org>  Sat, 29 Jul 2006 17:12:56 -0400

ikiwiki (1.11) unstable; urgency=low

  * Patch from Enrico that
    - Adds a tag plugin that allows more easily tagging pages.
      The meta plugin can also still be used for that, but the tag plugin
      also lists a page's tags at the bottom of the page.
    - Allows preprocessor directives to have parameters with no specified
      value.
    - Fixes preprocessor directive parameter parsing so that
      foo=bar baz now means "foo=bar" and a "baz" with no value.
  * Run pagetemplate hooks when inlining pages so that inlined pages also
    list their tags.
  * Make all plugins with pagetemplate hooks check that variables exist
    on the template before setting them, for robustness.
  * Switch pagetemplate hooks to using named parameters.
  * Pass a destpage parameter to preprocessor and pagetemplate hooks.
    This will be the page that a source page will be part of, which is
    different than the source page for inlined pages.
  * Audited all plugins to endure they pass (page, destpage) to htmllink
    appropriatly. This means inlining of various plugins will not work
    properly, with correct links generated.

 -- Joey Hess <joeyh@debian.org>  Thu, 27 Jul 2006 20:51:23 -0400

ikiwiki (1.10) unstable; urgency=low

  * Run page through any relevant filters when generating a page preview.
  * Noticed a bug in the wikitext markup plugin -- it made CamelCase links the
    default throughout the wiki, not only on wikitext pages. Decided to call
    this a feature, and split the camelcase support out into a separate plugin
    that is independant of wikitext.
  * Fix CamelCase regexp to not break [[FooBar|BazBar]] WikiLinks.

 -- Joey Hess <joeyh@debian.org>  Wed, 26 Jul 2006 18:06:35 -0400

ikiwiki (1.9) unstable; urgency=low

  * Improve display of parentlinks and page title of toplevel index page.
  * Patch from Faidon to use svn --limit when possible for recentchanges,
    speeds up recentchanges a lot for wikis with more history.
  * Patch from Recai to fix utf8 issues in git backend.
  * Add wikitext markup plugin, which supports ".wiki" pages written in the
    original wiki syntax, CamelCase links and all.
  * Support a w3mmode, which lets w3m run ikiwiki using its local CGI
    support, to edit pages etc without a web server.
  * Display CGI processing errors if present.
  * Fix from Faidon for a XML parser issue that breaks utf-8 for
    RecentChanges. Avoid using XML::SAX::PurePerl, which is buggy in this
    area, and also way slow.
  * Match 'web commit from' in SVN and git, these are web commits too.
    (Faidon)
  * Consolidated all decode_utf8 in FormBuilder's fields to make the code more
    readable and avoid future mistakes. The patch seems to work and for the
    first time I have a UTF-8 username ;-) (Faidon)
  * Use form->field consistently, not form->param.
  * Patch from Recai to allow selection of page type when creating a new page.
    Default page type is inherited from the link clicked on to create the new
    page.

 -- Joey Hess <joeyh@debian.org>  Wed, 26 Jul 2006 17:25:30 -0400

ikiwiki (1.8) unstable; urgency=low

  * Fix orphans plugin to not count a link to a nonexistant page as a reason
    for a page not being an orphan.
  * Support pinging services such as Technorati using XML-RPC to notify them
    about changes to rss feeds.
  * Parse svn log as xml for improved utf8 and security. Note that this makes
    ikiwiki depend on XML::Simple. Patch by Faidon Liambotis.
  * POSIX::strftime doesn't know about encodings and doesn't return a utf8
    flagged string even if the locale causes it to generate utf8 output,
    so make sure to let perl know it should be handled as utf8. Also,
    the optimised version used for standard time formats won't work if the
    user has changed locale, so drop it. Thanks, Faidon Liambotis.
  * Fix re-encoding of the comments field to utf8 if a commit fails
    due to a conflict. Thanks, Faidon Liambotis.
  * Let svn know that commits have utf8 commit messages. Thanks, Faidon
    Liambotis.
  * Add insane double encode/decode to utf8 around call to markdown.
    This works around a truely strange bug, which is apparently a bug in
    perl, #376329. Also added a test case for it.
  * Improve layout of edit page so formatting help link is always visible w/o
    getting in the way of the preview.
  * Centralised all calls to HTML::Template and force all the templates
    to be read as utf8.
  * Support pages with utf8 filenames. Patch by Faidon Liambotis.
  * Introduce add_plugins and disable_plugins config options in setup files.
    This allows adding or removing plugins w/o overriding the whole list of
    default plugins, which makes it easier to upgrade when new default plugins
    are added.
  * Support htmlize plugins and make mdwn one such plugin, which is enabled by
    default (of course!). Based on a patch by Faidon Liambotis.
  * Add a html plugin, which can be used to write wikis in raw html,
    if you'd ever want to do such a thing. Slightly tricky, since ikiwiki
    defaults to not processing .html files, since w/o this plugin they would
    be copied unsanitised. With this plugin, it will process and html
    sanitise them, like any other page type.
  * Rebuilding wrappers is necessary on upgrade to this version.
  * Make ikiwiki --setup --refresh rebuild wrappers, so wrapper rebuild
    will be automatically done on all upgrades.
  * Don't send pings if the wiki is being rebuilt.
  * Work around very innefficient behavior in File::Spec::abs2rel. Result
    is a savings of 2 pointless fork/execs per link calculation, which
    results in ~25% speedup of ikiwiki building its own doc wiki, and
    about 35% speedup displaying RecentChanges!
  * Make RecentChanges use a table and some CSS, should be much more readable.
    No code changes involved.
  * Encode & in diffurl in examples, to conform to pedantic rules.
  * Speed up RecentChanges by another 40% or so with some memoization.
  * Memoize abs2rel, which is still kinda slow, for another 30% speedup
    in time to build the doc wiki.

 -- Joey Hess <joeyh@debian.org>  Tue,  4 Jul 2006 12:46:29 -0400

ikiwiki (1.7) unstable; urgency=low

  * Updated logo from Recai with some kerning and alingment tuning.
  * Patch from Recai to fix git recentchanges code to work with git 1.4 which
    changed some output.
  * Copyright update.

 -- Joey Hess <joeyh@debian.org>  Sun, 18 Jun 2006 23:33:35 -0400

ikiwiki (1.6) unstable; urgency=low

  * YA utf-8 patch from Recai, this time to fix previewing a page so that
    the text in the input box is re-encoded back to utf-8.
  * -CSD does not affect modules, so readfile() was not using the utf-8 input
    layer, which led to lots of problems; make it force read files as utf-8.
    Closes: #373203
  * Note that as a consequence, this version of ikiwiki will actually try to
    parse utf8 in source files for the first time, which may expose broken
    utf8 in wiki sources that was hidden before. Most common will be
    perl warnings like "utf8 "\xE9" does not map to Unicode"
  * writefile() likewise needs to use the utf8 output layer.
  * Remove the -CSD from ikiwiki's hashbang since it's useless to have it
    there.
  * Revert some of the decode_utf8 changes in CGI.pm that seem unnecessary
    given the readfile fix.
  * Add utf-8 testcases for readfile and htmlize.
  * Put back the encode_utf8 in the input to markdown; it's really not utf-8
    safe.
  * More utf-8 fixes from Recai, partly to things I broke above:
    - The serious problem is that writefile() saves the content in undecoded
      format in CGI, hence all (non-ascii) chars are corrupted permanently.
    - Comment field in edit page is not decoded and all the non-ascii chars in
      this field are corrupted as the result.  We should decode it as we do it
      for the content.
    - Add 'use encoding "utf8"' to CGI.pm to avoid warnings about wide
      character in print.
  * New SVG logo from Recai.

 -- Joey Hess <joeyh@debian.org>  Sun, 18 Jun 2006 19:18:46 -0400

ikiwiki (1.5) unstable; urgency=low

  * Add --timeformat config option to allow changing how dates are displayed.
    Note that as a side effect, dates will now be displayed using the local
    timezone, not as GMT.
  * More security review.
  * Patch from Dr. Zini to add link() and backlink() to globlists. This allows
    for some handy stuff like:
    - Using links as a kind of tag; creating blog pages that list all pages
      containing a given tag/link or not containing some other tag.
    - Subscribing to mail notifications whenever a change is made to a page
      that is a backlink of page foo. Ie, "Please notify me of changes in all
      pages that link to my home page in the wiki"
    - Locking any pages that are linked to from a particular page, so that
      lists of locks can be exposed in the wiki.
  * Reorganised the doc wiki's todo/* pages, using a link/tag to flag
    when a todo item is done, instead of the previous moving it to a different
    subdir.
  * Allow pagetemplate plugins to override *anything* in the template.
  * Add a meta plugin, which allows specifying various metadata about pages,
    like license and author. It also allows for inserting html link and meta
    tags into html, overriding the title, and adding hidden WikiLinks, which
    can be useful when using link-based globbing for page categorisation.
  * Remove preprocessor directives from inlined pages.
  * Allow simple preprocessor directive values to be specified w/o quotes.
  * Add support for using git instead of subversion as the RCS backend,
    tremendous thanks to Recai Oktaş for this.
  * Doc updates for git.
  * Fix absolute url munging in rss generation to support https, ftp, etc urls
    not just http urls.
  * Patch from Recai Oktaş to improve utf-8 support, it should now use proper
    utf-8 for edit and other fields, and for recentchanges. There may still
    be utf-8 issues with the preferences page though.

 -- Joey Hess <joeyh@debian.org>  Sun, 11 Jun 2006 19:56:54 -0400

ikiwiki (1.4) unstable; urgency=low

  * Tell HTML::Scrubber to treat "/" as a valid attribute which is its
    very strange way of enabling proper XHTML <br /> type tags. Output html
    should be always valid again now.
  * The page name and parent links has switched from using a <h1> to a styled
    <span>, so pages can use <h1> internally instead of needing to use <h2>.
  * Updated all of ikiwiki's own wiki pages for that.
  * Add pagetemplate hook, which can be used by plugins that want to mess
    around with adding new stuff to the page template.
  * Remove headercontent; the search plugin now adds the search box to the
    header by registering a pagetemplate hook, and other plugins should do
    similarly.
  * Rebuilding on upgrade to this version is recommended.
  * Add a html validity check to the test suite, using the wdg-html-validator,
    if available.
  * Make the html valid when there is nothing in the actions list.
  * Reordered some function call parameters for consistency.
  * Enable full utf-8 support for page input and output.
  * Add a workaround for markdown, which does not work well with utf-8
    strings.
  * --getctime had bitrotted (well I only ever used it the once so far..),
    fix and make it a bit more flexible
  * rcs_getctime is changed, now rather than needing to loop over all pages,
    it should just use the rcs to get the ctime of the passed file.
  * When inlining a page in another one, links from the inlined page are now
    expanded the same as they are when rendering the inlined page as a
    standalone page. So rather than being expanded from the POV of the
    inlining page, they are expanded from the POV of the inlined page.

    For example, a link from blog/foo to "bar" will now link to blog/bar
    if it exists. Previously this needed to be a link explicitly to
    "blog/bar"; such links will also continue to work.

    (This was slightly complex to do as the link still has to be constructed
    relative to the inlining page.)
  * Make page edit textarea resize to fit browser window.
  * Add -refresh option to ikiwiki-mass-rebuild and use that on upgrades that
    do not need a full rebuild, in order to update any basewiki pages.

 -- Joey Hess <joeyh@debian.org>  Sat, 27 May 2006 15:08:49 -0400

ikiwiki (1.3) unstable; urgency=low

  * Fix the preinst introduced in the last version. Closes: #367458

 -- Joey Hess <joeyh@debian.org>  Tue, 16 May 2006 02:43:02 -0500

ikiwiki (1.2) unstable; urgency=low

  * Remove dups from the brokenlinks list.
  * Add libc6-dev to dependencies, needed to build wrappers.
  * Install wikilist in correct location. Closes: #367371

 -- Joey Hess <joeyh@debian.org>  Mon, 15 May 2006 10:53:49 -0500

ikiwiki (1.1) unstable; urgency=low

  * Rename inlinepage to depends, so that it can be used to refer to more
    dependency relationships than just inlining. This will require a rebuild
    on upgrade to this version.
  * Move the rss link, put it in the blogpost form if there is one and at the
    top if not. This is both nicer because easier to find, and it cleans up
    the code which had used inlinepage as a flag for adding the link later.
  * Allow the depends GlobList to be built up from multiple sources (such as
    plugins) during a page render.
  * Which means that more than one blog is now supported to appear on a
    single page. (With some limitations, like only the last one getting an
    rss file.)
  * Added a plugin system.
  * Added a pagecount plugin, enabled by default.
  * Support PreProcessorDirectives with no parameters, ie "[[pagecount ]]".
  * Fixed/optimised backlinks code, to avoid rebuilding pages to update
    backlinks when the backlinks hadn't really changed.
  * Moved inline page support, rss generation etc into the inline plugin,
    enabled by default.
  * Added brokenlinks plugin, not enabled by default, but rather handy.
  * Fix several broken links in the doc wiki.
  * Smarter behavior when creating a page and a page of the same name (but
    different location) already exists.
  * Add an orphans plugin for finding pages that nothing links to.
  * Removed backlinks page, which it turns out nothing used.
  * Split off an IkiWiki.pm out of ikiwiki and have all the other modules use
    it, this will allow for adding a unit test suite.
  * Add unit tests for several core functions, including globlist_match,
    dirname, basename, bestlink, linkify, pagetitle, titlepage.
  * Smart globlist merging.
  * Patch from Thomas Schwinge to switch from --svn to --rcs=svn, etc,
    to pave the way for adding other RCS support. This also changes the
    setup files, where before they had svn => 1 or svn => 0, now they have
    rcs => "svn" or rcs => "".
  * Add a debian/NEWS file with upgrade notes.
  * Load whatever rcs module is specified, so new ones can be just dropped in
    as plugins and work. (Well, in theory.)
  * Add some basic docs about writing RCS modules.
  * Broke search capability out into a plugin, removed the --hyperestraier
    switch.
  * Added smiley plugin, nicely controlled and documented by the smileys page.
  * Copied in some smileys from Moin Moin.
  * Allow links of the form [[some page|page]], with whitespace in the link
    text.
  * Removed --sanitize and --no-sanitize, replaced with --plugin htmlscrubber
    and --disable-plugin htmlscrubber.
  * Allow discussion links on pages to be turned off with --no-discussion.
  * Add ikiwiki-mass-rebuild script, ripped out of the postinst.
  * Add some new config items to the estseek.conf template, which are needed
    by hyperestraier 1.2.3.

 -- Joey Hess <joeyh@debian.org>  Fri,  5 May 2006 17:00:41 -0400

ikiwiki (1.0) unstable; urgency=low

  * First official release.

 -- Joey Hess <joeyh@debian.org>  Tue, 25 Apr 2006 02:08:17 -0400
